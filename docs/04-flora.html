<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.80">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Code and charts for the 2022 30-Day Chart Challenge">
<title>30DCC - 4&nbsp; Flora</title>
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
<script src="site_libs/quarto-nav/quarto-nav.js"></script><script src="site_libs/quarto-nav/headroom.min.js"></script><script src="site_libs/clipboard/clipboard.min.js"></script><meta name="quarto:offset" content="./">
<script src="site_libs/quarto-search/autocomplete.umd.js"></script><script src="site_libs/quarto-search/fuse.min.js"></script><script src="site_libs/quarto-search/quarto-search.js"></script><link href="./05-slope.html" rel="next">
<link href="./03-historical.html" rel="prev">
<script src="site_libs/cookie-consent/cookie-consent.js"></script><link href="site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="site_libs/quarto-html/quarto.js"></script><script src="site_libs/quarto-html/popper.min.js"></script><script src="site_libs/quarto-html/tippy.umd.min.js"></script><script src="site_libs/quarto-html/anchor.min.js"></script><link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<script src="site_libs/bootstrap/bootstrap.min.js"></script><link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
    "location": "sidebar",
    "copy-button": false,
    "collapse-after": 2,
    "panel-placement": "start",
    "type": "textbox",
    "limit": 20,
    "language": {
      "search-no-results-text": "No results",
      "search-matching-documents-text": "matching documents",
      "search-copy-link-title": "Copy link to search",
      "search-hide-matches-text": "Hide additional matches",
      "search-more-match-text": "more match in this document",
      "search-more-matches-text": "more matches in this document",
      "search-clear-button-title": "Clear",
      "search-detached-cancel-button-title": "Cancel",
      "search-submit-button-title": "Submit"
    }
  }</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script type="text/plain" cookie-consent="tracking">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-6NP3MF25W3', { 'anonymize_ip': true});
  </script><script type="text/javascript" charset="UTF-8">
  document.addEventListener('DOMContentLoaded', function () {
  cookieconsent.run({
    "notice_banner_type":"simple",
    "consent_type":"implied",
    "palette":"light",
    "language":"en",
    "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
    "notice_banner_reject_button_hide":false,
    "preferences_center_close_button_hide":false,
    "website_name":""
    });
  });
  </script><script type="application/json" class="js-hypothesis-config">
  {
    "theme": "clean",
    "openSidebar": false
  }
  </script><script async="" src="https://hypothes.is/embed.js"></script><!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]--><link rel="stylesheet" href="include/style.css">
</head>
<body class="floating">
<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">
<span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Flora</span>
</h1>
      <button type="button" class="quarto-btn-toggle btn">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">30DCC</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/debruine/30DCC-2022/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Overview</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-comparisons" aria-expanded="true">Comparisons</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-comparisons" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-comparisons" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-part-to-whole.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Part-to-whole</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-pictogram.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Pictogram</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-historical.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Historical</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-flora.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Flora</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-slope.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Slope</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-owid.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">OWiD</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-distributions" aria-expanded="true">Distributions</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-distributions" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-distributions" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-physical.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Physical</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-mountains.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Mountains</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-statistics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Statistics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-experimental.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Experimental</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-circular.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Circular</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-economist.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">The Economist</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-relationships" aria-expanded="true">Relationships</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-relationships" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-relationships" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-correlation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Correlation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-3-dimensional.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">3-dimensional</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-multivariate.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Multivariate</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-environment.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Environment</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-connections.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Connections</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-oecd.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">OECD</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-timeseries" aria-expanded="true">Timeseries</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-timeseries" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-timeseries" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-global-challenge.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Global Challenge</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-new-tool.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">New Tool</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-down-upwards.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Down/Upwards</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-animation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Animation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-tiles.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Tiles</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-financial-times.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Financial Times</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-uncertainties" aria-expanded="true">Uncertainties</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-uncertainties" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-uncertainties" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-trend.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Trend</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-interactive.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Interactive</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./27-future.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Future</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./28-deviations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Deviations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./29-storytelling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Storytelling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30-un-population.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">UN Population</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-appendices" aria-expanded="true">Appendices</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-appendices" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-appendices" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-a-colours.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Colours</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-b-stained-glass.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Stained Glass Heart</span></a>
  </div>
</li>
    </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc"><h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#svg" class="nav-link active" data-scroll-target="#svg"> <span class="header-section-number">4.1</span> SVG</a></li>
<li><a href="#flower-petals" class="nav-link" data-scroll-target="#flower-petals"> <span class="header-section-number">4.2</span> Flower Petals</a></li>
<li><a href="#rotate" class="nav-link" data-scroll-target="#rotate"> <span class="header-section-number">4.3</span> Rotate</a></li>
<li><a href="#fix-the-overlap" class="nav-link" data-scroll-target="#fix-the-overlap"> <span class="header-section-number">4.4</span> Fix the Overlap</a></li>
<li><a href="#petals" class="nav-link" data-scroll-target="#petals"> <span class="header-section-number">4.5</span> 7 Petals</a></li>
<li><a href="#make-a-function" class="nav-link" data-scroll-target="#make-a-function"> <span class="header-section-number">4.6</span> Make a Function</a></li>
<li><a href="#original-pride-flag" class="nav-link" data-scroll-target="#original-pride-flag"> <span class="header-section-number">4.7</span> Original Pride Flag</a></li>
<li><a href="#save-as-svg-or-png" class="nav-link" data-scroll-target="#save-as-svg-or-png"> <span class="header-section-number">4.8</span> Save as SVG or PNG</a></li>
</ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/debruine/30DCC-2022/edit/main/04-flora.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/debruine/30DCC-2022/issues/new" class="toc-action">Report an issue</a></p><p><a href="https://github.com/debruine/30DCC-2022/blob/main/04-flora.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header"><h1 class="title d-none d-lg-block display-7">
<span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Flora</span>
</h1>
</header><div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># always useful</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(glue) <span class="co"># for editing SVG text</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(rsvg) <span class="co"># to convert SVG to other formats</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>I’m going a little off-piste today. I was inspired by all of these <a href="https://www.vectorstock.com/royalty-free-vectors/chart-flower-infographic-options-vectors">stock infographics</a>, but I wondered if I could make something similar with code. You probably can do this with ggplot and annotations, but I wanted to try something different.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"images/flower_infographics.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/flower_infographics.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Flower infographics from vectorstock.com</figcaption><p></p>
</figure>
</div>
</div>
</div>
<section id="svg" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="svg">
<span class="header-section-number">4.1</span> SVG</h2>
<p>I have some experience making SVGs (scalable vector graphics), but I always have to look things up. <a href="https://www.w3schools.com/graphics/svg_intro.asp">W3Schools</a> is my favourite source for quick tutorials on web stuff. I used it a ton to make this chart.</p>
<p>While I was developing this code, I needed to have a quick look at the images a lot, and couldn’t figure out an efficient way to view SVGs, so I wrote a function that converts the svg text to a PNG tempfile and displays it in my Rmd, but only when I’m running the code interactively.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb3"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>viewsvg <span class="ot">&lt;-</span> <span class="cf">function</span>(svg, <span class="at">width =</span> <span class="dv">5</span>, <span class="at">height =</span> <span class="dv">5</span>, <span class="at">dpi =</span> <span class="dv">150</span>) {</span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="cf">if</span> (<span class="fu">interactive</span>() <span class="sc">&amp;&amp;</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>      <span class="sc">!</span><span class="fu">isTRUE</span>(<span class="fu">getOption</span>(<span class="st">"knitr.in.progress"</span>))) {</span>
<span id="cb3-4"><a href="#cb3-4"></a>    imgpath <span class="ot">&lt;-</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">".png"</span>)</span>
<span id="cb3-5"><a href="#cb3-5"></a>    rsvg<span class="sc">::</span><span class="fu">rsvg_png</span>(<span class="at">svg =</span> <span class="fu">charToRaw</span>(svg),</span>
<span id="cb3-6"><a href="#cb3-6"></a>                   <span class="at">file =</span> imgpath,</span>
<span id="cb3-7"><a href="#cb3-7"></a>                   <span class="at">width =</span> width<span class="sc">*</span>dpi, <span class="at">height =</span> height<span class="sc">*</span>dpi)</span>
<span id="cb3-8"><a href="#cb3-8"></a>    knitr<span class="sc">::</span><span class="fu">include_graphics</span>(imgpath)</span>
<span id="cb3-9"><a href="#cb3-9"></a>  } <span class="cf">else</span> {</span>
<span id="cb3-10"><a href="#cb3-10"></a>    <span class="fu">cat</span>(svg)</span>
<span id="cb3-11"><a href="#cb3-11"></a>  }</span>
<span id="cb3-12"><a href="#cb3-12"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>It outputs the SVG as html when knitting. All of the images below are created with a code chunk that looks like this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1"></a><span class="in">```{r, results='asis', echo = FALSE}</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">viewsvg</span>(svg)</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="flower-petals" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="flower-petals">
<span class="header-section-number">4.2</span> Flower Petals</h2>
<p>First, I need a function to figure out the coordinates of regular polygons.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb5"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>poly_coords <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">n =</span> <span class="dv">6</span>, <span class="at">r =</span> <span class="dv">1</span>, <span class="at">cx =</span> <span class="dv">0</span>, <span class="at">cy =</span> <span class="dv">0</span>, <span class="at">rot =</span> <span class="dv">0</span>, <span class="at">digits =</span> <span class="dv">2</span>) {</span>
<span id="cb5-2"><a href="#cb5-2"></a>  x <span class="ot">=</span> <span class="fu">map_dbl</span>(<span class="dv">0</span><span class="sc">:</span>(n<span class="dv">-1</span>), <span class="sc">~</span>{ cx <span class="sc">+</span> r <span class="sc">*</span> <span class="fu">cos</span>(<span class="dv">2</span> <span class="sc">*</span> pi <span class="sc">*</span> .x <span class="sc">/</span> n <span class="sc">+</span> rot) })</span>
<span id="cb5-3"><a href="#cb5-3"></a>  y <span class="ot">=</span> <span class="fu">map_dbl</span>(<span class="dv">0</span><span class="sc">:</span>(n<span class="dv">-1</span>), <span class="sc">~</span>{ cy <span class="sc">+</span> r <span class="sc">*</span> <span class="fu">sin</span>(<span class="dv">2</span> <span class="sc">*</span> pi <span class="sc">*</span> .x <span class="sc">/</span> n <span class="sc">+</span> rot) })</span>
<span id="cb5-4"><a href="#cb5-4"></a>  </span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="fu">list</span>(</span>
<span id="cb5-6"><a href="#cb5-6"></a>    <span class="at">x =</span> <span class="fu">round</span>(x, digits),</span>
<span id="cb5-7"><a href="#cb5-7"></a>    <span class="at">y =</span> <span class="fu">round</span>(y, digits)</span>
<span id="cb5-8"><a href="#cb5-8"></a>  )</span>
<span id="cb5-9"><a href="#cb5-9"></a>}</span>
<span id="cb5-10"><a href="#cb5-10"></a></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co"># example hexagon</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="fu">poly_coords</span>(<span class="at">n =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-stdout">
<pre><code>$x
[1]  1.0  0.5 -0.5 -1.0 -0.5  0.5

$y
[1]  0.00  0.87  0.87  0.00 -0.87 -0.87</code></pre>
</div>
</div>
<p>Now, make <code>n</code> circles with radius <code>r</code> that are <code>petal_dist</code> away from the center of the flower.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb7"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>n <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>r <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>petal_dist <span class="ot">&lt;-</span> <span class="dv">300</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>cx <span class="ot">&lt;-</span> <span class="dv">500</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>cy <span class="ot">&lt;-</span> <span class="dv">500</span></span>
<span id="cb7-6"><a href="#cb7-6"></a></span>
<span id="cb7-7"><a href="#cb7-7"></a>coords <span class="ot">&lt;-</span> <span class="fu">poly_coords</span>(n, petal_dist, cx, cy)</span>
<span id="cb7-8"><a href="#cb7-8"></a>petals <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'    &lt;circle cx="{coords$x}" cy="{coords$y}" r="{r}" fill="{rainbow(n)}" /&gt;'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>  <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb7-10"><a href="#cb7-10"></a></span>
<span id="cb7-11"><a href="#cb7-11"></a>svg <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"&lt;svg viewBox = '0 0 {2*cx} {2*cy}'&gt;"</span>,</span>
<span id="cb7-12"><a href="#cb7-12"></a>        petals, </span>
<span id="cb7-13"><a href="#cb7-13"></a>      <span class="st">"&lt;/svg&gt;"</span>,</span>
<span id="cb7-14"><a href="#cb7-14"></a>      <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>  <span class="fu">glue</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<svg viewbox="0 0 1000 1000"><circle cx="800" cy="500" r="200" fill="#FF0000"></circle><circle cx="650" cy="759.81" r="200" fill="#FFFF00"></circle><circle cx="350" cy="759.81" r="200" fill="#00FF00"></circle><circle cx="200" cy="500" r="200" fill="#00FFFF"></circle><circle cx="350" cy="240.19" r="200" fill="#0000FF"></circle><circle cx="650" cy="240.19" r="200" fill="#FF00FF"></circle></svg></section><section id="rotate" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="rotate">
<span class="header-section-number">4.3</span> Rotate</h2>
<p>Rotate them so the red is at 12:00.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb8"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>rot <span class="ot">&lt;-</span> <span class="sc">-</span>pi<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a>coords <span class="ot">&lt;-</span> <span class="fu">poly_coords</span>(n, petal_dist, cx, cy, rot)</span>
<span id="cb8-4"><a href="#cb8-4"></a>petals <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'    &lt;circle cx="{coords$x}" cy="{coords$y}" r="{r}" fill="{rainbow(n)}" /&gt;'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb8-6"><a href="#cb8-6"></a></span>
<span id="cb8-7"><a href="#cb8-7"></a>svg <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"&lt;svg viewBox = '0 0 {2*cx} {2*cy}'&gt;"</span>,</span>
<span id="cb8-8"><a href="#cb8-8"></a>        petals, </span>
<span id="cb8-9"><a href="#cb8-9"></a>      <span class="st">"&lt;/svg&gt;"</span>,</span>
<span id="cb8-10"><a href="#cb8-10"></a>      <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>  <span class="fu">glue</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<svg viewbox="0 0 1000 1000"><circle cx="500" cy="200" r="200" fill="#FF0000"></circle><circle cx="759.81" cy="350" r="200" fill="#FFFF00"></circle><circle cx="759.81" cy="650" r="200" fill="#00FF00"></circle><circle cx="500" cy="800" r="200" fill="#00FFFF"></circle><circle cx="240.19" cy="650" r="200" fill="#0000FF"></circle><circle cx="240.19" cy="350" r="200" fill="#FF00FF"></circle></svg></section><section id="fix-the-overlap" class="level2" data-number="4.4"><h2 data-number="4.4" class="anchored" data-anchor-id="fix-the-overlap">
<span class="header-section-number">4.4</span> Fix the Overlap</h2>
<p>When they overlap, the last petal is on top of the first, so we need to replot the left half of that. It took me forever to figure out how to plot the left half of a circle with <code>&lt;path&gt;</code> :(</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb9"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>coords <span class="ot">&lt;-</span> <span class="fu">poly_coords</span>(n, petal_dist, cx, cy, rot)</span>
<span id="cb9-2"><a href="#cb9-2"></a>petals <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'    &lt;circle cx="{coords$x}" cy="{coords$y}" r="{r}" fill="{rainbow(n)}" /&gt;'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a>x1 <span class="ot">&lt;-</span> coords<span class="sc">$</span>x[[<span class="dv">1</span>]]</span>
<span id="cb9-6"><a href="#cb9-6"></a>y1 <span class="ot">&lt;-</span> coords<span class="sc">$</span>y[[<span class="dv">1</span>]]</span>
<span id="cb9-7"><a href="#cb9-7"></a>petal_fix <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'    &lt;g transform="rotate({rot*180/pi}, {x1}, {y1})"&gt;</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="st">       &lt;path d="M {x1-r} {y1}</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="st">       A {r} {r} 0 0 1 {x1+r} {y1}</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="st">       L {x1-r} {y1}</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="st">       Z" </span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="st">       fill="{rainbow(n)[[1]]}" /&gt;&lt;/g&gt;'</span>)</span>
<span id="cb9-13"><a href="#cb9-13"></a></span>
<span id="cb9-14"><a href="#cb9-14"></a>svg <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"&lt;svg viewBox = '0 0 {2*cx} {2*cy}'&gt;"</span>,</span>
<span id="cb9-15"><a href="#cb9-15"></a>        petals, petal_fix, </span>
<span id="cb9-16"><a href="#cb9-16"></a>      <span class="st">"&lt;/svg&gt;"</span>,</span>
<span id="cb9-17"><a href="#cb9-17"></a>      <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-18"><a href="#cb9-18"></a>  <span class="fu">glue</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<svg viewbox="0 0 1000 1000"><circle cx="500" cy="200" r="200" fill="#FF0000"></circle><circle cx="759.81" cy="350" r="200" fill="#FFFF00"></circle><circle cx="759.81" cy="650" r="200" fill="#00FF00"></circle><circle cx="500" cy="800" r="200" fill="#00FFFF"></circle><circle cx="240.19" cy="650" r="200" fill="#0000FF"></circle><circle cx="240.19" cy="350" r="200" fill="#FF00FF"></circle><g transform="rotate(-90, 500, 200)"><path d="M 300 200
A 200 200 0 0 1 700 200
L 300 200
Z" fill="#FF0000"></path></g></svg><p>Now I want to add a center hexagon that just touches each petal.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb10"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>center <span class="ot">&lt;-</span> <span class="fu">poly_coords</span>(n, petal_dist<span class="sc">-</span>r, cx, cy, rot) <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="fu">glue</span>(<span class="st">"{cc$x},{cc$y}"</span>, <span class="at">cc =</span> .) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="fu">glue</span>(<span class="st">'&lt;polygon points="{pts}" fill="grey" /&gt;'</span>, <span class="at">pts =</span> .)</span>
<span id="cb10-5"><a href="#cb10-5"></a></span>
<span id="cb10-6"><a href="#cb10-6"></a>svg <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"&lt;svg viewBox = '0 0 {2*cx} {2*cy}'&gt;"</span>, </span>
<span id="cb10-7"><a href="#cb10-7"></a>      center,</span>
<span id="cb10-8"><a href="#cb10-8"></a>      petals, petal_fix,</span>
<span id="cb10-9"><a href="#cb10-9"></a>      <span class="st">"&lt;/svg&gt;"</span>,</span>
<span id="cb10-10"><a href="#cb10-10"></a>      <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-11"><a href="#cb10-11"></a>  <span class="fu">glue</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<svg viewbox="0 0 1000 1000"><polygon points="500,400 586.6,450 586.6,550 500,600 413.4,550 413.4,450" fill="grey"></polygon><circle cx="500" cy="200" r="200" fill="#FF0000"></circle><circle cx="759.81" cy="350" r="200" fill="#FFFF00"></circle><circle cx="759.81" cy="650" r="200" fill="#00FF00"></circle><circle cx="500" cy="800" r="200" fill="#00FFFF"></circle><circle cx="240.19" cy="650" r="200" fill="#0000FF"></circle><circle cx="240.19" cy="350" r="200" fill="#FF00FF"></circle><g transform="rotate(-90, 500, 200)"><path d="M 300 200
A 200 200 0 0 1 700 200
L 300 200
Z" fill="#FF0000"></path></g></svg></section><section id="petals" class="level2" data-number="4.5"><h2 data-number="4.5" class="anchored" data-anchor-id="petals">
<span class="header-section-number">4.5</span> 7 Petals</h2>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>n          <span class="ot">&lt;-</span> <span class="dv">7</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>rot        <span class="ot">&lt;-</span> <span class="fl">8.5</span><span class="sc">*</span>pi<span class="sc">/</span><span class="dv">7</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>petal_dist <span class="ot">&lt;-</span> <span class="dv">400</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>r          <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>cx         <span class="ot">&lt;-</span> <span class="fl">1.1</span> <span class="sc">*</span> (petal_dist <span class="sc">+</span> r)</span>
<span id="cb11-6"><a href="#cb11-6"></a>cy         <span class="ot">&lt;-</span> cx</span>
<span id="cb11-7"><a href="#cb11-7"></a></span>
<span id="cb11-8"><a href="#cb11-8"></a>center <span class="ot">&lt;-</span> <span class="fu">poly_coords</span>(n, petal_dist<span class="sc">-</span>r, cx, cy, rot) <span class="sc">%&gt;%</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>  <span class="fu">glue</span>(<span class="st">"{cc$x},{cc$y}"</span>, <span class="at">cc =</span> .) <span class="sc">%&gt;%</span></span>
<span id="cb11-10"><a href="#cb11-10"></a>  <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-11"><a href="#cb11-11"></a>  <span class="fu">glue</span>(<span class="st">'&lt;polygon points="{pts}" fill="grey" /&gt;'</span>, <span class="at">pts =</span> .)</span>
<span id="cb11-12"><a href="#cb11-12"></a></span>
<span id="cb11-13"><a href="#cb11-13"></a>coords <span class="ot">&lt;-</span> <span class="fu">poly_coords</span>(n, petal_dist, cx, cy, rot)</span>
<span id="cb11-14"><a href="#cb11-14"></a>petals <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'    &lt;circle cx="{coords$x}" cy="{coords$y}" r="{r}" fill="{rainbow(n)}" /&gt;'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>  <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb11-16"><a href="#cb11-16"></a></span>
<span id="cb11-17"><a href="#cb11-17"></a>x1 <span class="ot">&lt;-</span> coords<span class="sc">$</span>x[[<span class="dv">1</span>]]</span>
<span id="cb11-18"><a href="#cb11-18"></a>y1 <span class="ot">&lt;-</span> coords<span class="sc">$</span>y[[<span class="dv">1</span>]]</span>
<span id="cb11-19"><a href="#cb11-19"></a>petal_fix <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'    &lt;g transform="rotate({rot*180/pi}, {x1}, {y1})"&gt;</span></span>
<span id="cb11-20"><a href="#cb11-20"></a><span class="st">       &lt;path d="M {x1-r} {y1}</span></span>
<span id="cb11-21"><a href="#cb11-21"></a><span class="st">       A {r} {r} 0 0 1 {x1+r} {y1}</span></span>
<span id="cb11-22"><a href="#cb11-22"></a><span class="st">       L {x1-r} {y1}</span></span>
<span id="cb11-23"><a href="#cb11-23"></a><span class="st">       Z" </span></span>
<span id="cb11-24"><a href="#cb11-24"></a><span class="st">       fill="{rainbow(n)[[1]]}" /&gt;&lt;/g&gt;'</span>)</span>
<span id="cb11-25"><a href="#cb11-25"></a></span>
<span id="cb11-26"><a href="#cb11-26"></a></span>
<span id="cb11-27"><a href="#cb11-27"></a>text <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'    &lt;text x="{coords$x}" y="{coords$y+40}"&gt;{LETTERS[1:n]}&lt;/text&gt;"'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-28"><a href="#cb11-28"></a>  <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb11-29"><a href="#cb11-29"></a></span>
<span id="cb11-30"><a href="#cb11-30"></a>svg_style <span class="ot">&lt;-</span> <span class="st">'&lt;style type="text/css"&gt;</span></span>
<span id="cb11-31"><a href="#cb11-31"></a><span class="st">svg { </span></span>
<span id="cb11-32"><a href="#cb11-32"></a><span class="st">  font-family: sans-serif;</span></span>
<span id="cb11-33"><a href="#cb11-33"></a><span class="st">  font-size: 80px; </span></span>
<span id="cb11-34"><a href="#cb11-34"></a><span class="st">  text-anchor: middle; </span></span>
<span id="cb11-35"><a href="#cb11-35"></a><span class="st">  fill: white;</span></span>
<span id="cb11-36"><a href="#cb11-36"></a><span class="st">}</span></span>
<span id="cb11-37"><a href="#cb11-37"></a><span class="st">&lt;/style&gt;'</span></span>
<span id="cb11-38"><a href="#cb11-38"></a></span>
<span id="cb11-39"><a href="#cb11-39"></a>svg <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"&lt;svg viewBox = '0 0 {{2*cx}} {{2*cy}}'&gt;"</span>, </span>
<span id="cb11-40"><a href="#cb11-40"></a>             svg_style,</span>
<span id="cb11-41"><a href="#cb11-41"></a>             center,</span>
<span id="cb11-42"><a href="#cb11-42"></a>             <span class="st">'&lt;text x="{{cx}}" y="{{cy-20}}"&gt;All of the&lt;/text&gt;'</span>,</span>
<span id="cb11-43"><a href="#cb11-43"></a>             <span class="st">'&lt;text x="{{cx}}" y="{{cy+90}}"&gt;Things&lt;/text&gt;'</span>,</span>
<span id="cb11-44"><a href="#cb11-44"></a>             petals, petal_fix, text, <span class="st">"&lt;/svg&gt;"</span>,</span>
<span id="cb11-45"><a href="#cb11-45"></a>             <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-46"><a href="#cb11-46"></a>  <span class="fu">glue</span>(<span class="at">.open =</span> <span class="st">"{{"</span>, <span class="at">.close =</span> <span class="st">"}}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<svg viewbox="0 0 1320 1320"><style type="text/css">
svg { 
  font-family: sans-serif;
  font-size: 80px; 
  text-anchor: middle; 
  fill: white;
}
</style>
<polygon points="503.63,535.3 660,460 816.37,535.3 854.99,704.5 746.78,840.19 573.22,840.19 465.01,704.5" fill="grey"></polygon><text x="660" y="640">All of the</text><text x="660" y="750">Things</text><circle cx="347.27" cy="410.6" r="200" fill="#FF0000"></circle><circle cx="660" cy="260" r="200" fill="#FFDB00"></circle><circle cx="972.73" cy="410.6" r="200" fill="#49FF00"></circle><circle cx="1049.97" cy="749.01" r="200" fill="#00FF92"></circle><circle cx="833.55" cy="1020.39" r="200" fill="#0092FF"></circle><circle cx="486.45" cy="1020.39" r="200" fill="#4900FF"></circle><circle cx="270.03" cy="749.01" r="200" fill="#FF00DB"></circle><g transform="rotate(218.571428571429, 347.27, 410.6)"><path d="M 147.27 410.6
A 200 200 0 0 1 547.27 410.6
L 147.27 410.6
Z" fill="#FF0000"></path></g><text x="347.27" y="450.6">A</text>” <text x="660" y="300">B</text>” <text x="972.73" y="450.6">C</text>” <text x="1049.97" y="789.01">D</text>” <text x="833.55" y="1060.39">E</text>” <text x="486.45" y="1060.39">F</text>” <text x="270.03" y="789.01">G</text>”
</svg></section><section id="make-a-function" class="level2" data-number="4.6"><h2 data-number="4.6" class="anchored" data-anchor-id="make-a-function">
<span class="header-section-number">4.6</span> Make a Function</h2>
<p>Now I just need to wrap this all in a function so I can change the things I need. I also added transparency to the petals, which necessitated making the two halves of the first petal separately, otherwise the overlap fix increases the opacity of half the petal if there’s any transparency.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb12"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>poly_coords <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">n =</span> <span class="dv">6</span>, <span class="at">r =</span> <span class="dv">1</span>, <span class="at">cx =</span> <span class="dv">0</span>, <span class="at">cy =</span> <span class="dv">0</span>, <span class="at">rot =</span> <span class="dv">0</span>, <span class="at">digits =</span> <span class="dv">2</span>) {</span>
<span id="cb12-2"><a href="#cb12-2"></a>  x <span class="ot">=</span> <span class="fu">map_dbl</span>(<span class="dv">0</span><span class="sc">:</span>(n<span class="dv">-1</span>), <span class="sc">~</span>{ cx <span class="sc">+</span> r <span class="sc">*</span> <span class="fu">cos</span>(<span class="dv">2</span> <span class="sc">*</span> pi <span class="sc">*</span> .x <span class="sc">/</span> n <span class="sc">+</span> rot) })</span>
<span id="cb12-3"><a href="#cb12-3"></a>  y <span class="ot">=</span> <span class="fu">map_dbl</span>(<span class="dv">0</span><span class="sc">:</span>(n<span class="dv">-1</span>), <span class="sc">~</span>{ cy <span class="sc">+</span> r <span class="sc">*</span> <span class="fu">sin</span>(<span class="dv">2</span> <span class="sc">*</span> pi <span class="sc">*</span> .x <span class="sc">/</span> n <span class="sc">+</span> rot) })</span>
<span id="cb12-4"><a href="#cb12-4"></a>  </span>
<span id="cb12-5"><a href="#cb12-5"></a>  <span class="fu">list</span>(</span>
<span id="cb12-6"><a href="#cb12-6"></a>    <span class="at">x =</span> <span class="fu">round</span>(x, digits),</span>
<span id="cb12-7"><a href="#cb12-7"></a>    <span class="at">y =</span> <span class="fu">round</span>(y, digits)</span>
<span id="cb12-8"><a href="#cb12-8"></a>  )</span>
<span id="cb12-9"><a href="#cb12-9"></a>}</span>
<span id="cb12-10"><a href="#cb12-10"></a></span>
<span id="cb12-11"><a href="#cb12-11"></a>flower <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">n =</span> <span class="dv">6</span>, <span class="at">petal_dist =</span> <span class="dv">500</span>, <span class="at">r =</span> <span class="dv">250</span>, <span class="at">rot =</span> <span class="sc">-</span>pi<span class="sc">/</span><span class="dv">2</span>,</span>
<span id="cb12-12"><a href="#cb12-12"></a>                   <span class="at">petal_text =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span>n],</span>
<span id="cb12-13"><a href="#cb12-13"></a>                   <span class="at">center_text =</span> <span class="fu">c</span>(<span class="st">"All of the"</span>, <span class="st">"Things"</span>),</span>
<span id="cb12-14"><a href="#cb12-14"></a>                   <span class="at">petal_text_size =</span> r<span class="sc">/</span><span class="dv">2</span>,</span>
<span id="cb12-15"><a href="#cb12-15"></a>                   <span class="at">center_text_size =</span> petal_dist<span class="sc">/</span><span class="dv">6</span>,</span>
<span id="cb12-16"><a href="#cb12-16"></a>                   <span class="at">center_text_offsets =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.2</span>, <span class="sc">+</span><span class="fl">0.9</span>) <span class="sc">*</span> center_text_size,</span>
<span id="cb12-17"><a href="#cb12-17"></a>                   <span class="at">petal_colors =</span> <span class="fu">rainbow</span>(n),</span>
<span id="cb12-18"><a href="#cb12-18"></a>                   <span class="at">petal_alpha =</span> <span class="fl">1.0</span>,</span>
<span id="cb12-19"><a href="#cb12-19"></a>                   <span class="at">center_color =</span> <span class="st">"#808080"</span>,</span>
<span id="cb12-20"><a href="#cb12-20"></a>                   <span class="at">petal_text_color =</span> <span class="st">"white"</span>,</span>
<span id="cb12-21"><a href="#cb12-21"></a>                   <span class="at">center_text_color =</span> petal_text_color) {</span>
<span id="cb12-22"><a href="#cb12-22"></a>  </span>
<span id="cb12-23"><a href="#cb12-23"></a>  <span class="co"># calculate centre</span></span>
<span id="cb12-24"><a href="#cb12-24"></a>  cx <span class="ot">&lt;-</span> <span class="fl">1.1</span> <span class="sc">*</span> (petal_dist <span class="sc">+</span> r)</span>
<span id="cb12-25"><a href="#cb12-25"></a>  cy <span class="ot">&lt;-</span> cx</span>
<span id="cb12-26"><a href="#cb12-26"></a>  </span>
<span id="cb12-27"><a href="#cb12-27"></a>  <span class="co"># make centre polygon</span></span>
<span id="cb12-28"><a href="#cb12-28"></a>  center <span class="ot">&lt;-</span> <span class="fu">poly_coords</span>(n, petal_dist<span class="sc">-</span>r, cx, cy, rot) <span class="sc">%&gt;%</span></span>
<span id="cb12-29"><a href="#cb12-29"></a>    <span class="fu">glue</span>(<span class="st">"{cc$x},{cc$y}"</span>, <span class="at">cc =</span> .) <span class="sc">%&gt;%</span></span>
<span id="cb12-30"><a href="#cb12-30"></a>    <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-31"><a href="#cb12-31"></a>    <span class="fu">glue</span>(<span class="st">'&lt;polygon points="{pts}" fill="{center_color}" /&gt;'</span>, <span class="at">pts =</span> .)</span>
<span id="cb12-32"><a href="#cb12-32"></a>  </span>
<span id="cb12-33"><a href="#cb12-33"></a>  <span class="co"># make center texts</span></span>
<span id="cb12-34"><a href="#cb12-34"></a>  center_texts <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'    &lt;text x="{cx}" y="{cy+center_text_offsets}" fill="{center_text_color}" font-size="{center_text_size}px"&gt;{center_text}&lt;/text&gt;'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-35"><a href="#cb12-35"></a>    <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb12-36"><a href="#cb12-36"></a>  </span>
<span id="cb12-37"><a href="#cb12-37"></a>  <span class="co"># make petals</span></span>
<span id="cb12-38"><a href="#cb12-38"></a>  coords <span class="ot">&lt;-</span> <span class="fu">poly_coords</span>(n, petal_dist, cx, cy, rot)</span>
<span id="cb12-39"><a href="#cb12-39"></a>  petals <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'    &lt;circle cx="{coords$x}" cy="{coords$y}" r="{r}" fill="{petal_colors}" fill-opacity="{petal_alpha}" /&gt;'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-40"><a href="#cb12-40"></a>    <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb12-41"><a href="#cb12-41"></a>  </span>
<span id="cb12-42"><a href="#cb12-42"></a>  x1 <span class="ot">&lt;-</span> coords<span class="sc">$</span>x[[<span class="dv">1</span>]]</span>
<span id="cb12-43"><a href="#cb12-43"></a>  y1 <span class="ot">&lt;-</span> coords<span class="sc">$</span>y[[<span class="dv">1</span>]]</span>
<span id="cb12-44"><a href="#cb12-44"></a>  petal_fix1 <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'    &lt;g transform="rotate({(rot+pi)*180/pi}, {x1}, {y1})"&gt;</span></span>
<span id="cb12-45"><a href="#cb12-45"></a><span class="st">         &lt;path d="M {x1-r} {y1}</span></span>
<span id="cb12-46"><a href="#cb12-46"></a><span class="st">         A {r} {r} 0 0 1 {x1+r} {y1}</span></span>
<span id="cb12-47"><a href="#cb12-47"></a><span class="st">         L {x1-r} {y1}</span></span>
<span id="cb12-48"><a href="#cb12-48"></a><span class="st">         Z" </span></span>
<span id="cb12-49"><a href="#cb12-49"></a><span class="st">         fill="{petal_colors[[1]]}" fill-opacity="{petal_alpha}" /&gt;&lt;/g&gt;'</span>)</span>
<span id="cb12-50"><a href="#cb12-50"></a>  </span>
<span id="cb12-51"><a href="#cb12-51"></a>  petal_fix2 <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'    &lt;g transform="rotate({rot*180/pi}, {x1}, {y1})"&gt;</span></span>
<span id="cb12-52"><a href="#cb12-52"></a><span class="st">         &lt;path d="M {x1-r} {y1}</span></span>
<span id="cb12-53"><a href="#cb12-53"></a><span class="st">         A {r} {r} 0 0 1 {x1+r} {y1}</span></span>
<span id="cb12-54"><a href="#cb12-54"></a><span class="st">         L {x1-r} {y1}</span></span>
<span id="cb12-55"><a href="#cb12-55"></a><span class="st">         Z" </span></span>
<span id="cb12-56"><a href="#cb12-56"></a><span class="st">         fill="{petal_colors[[1]]}" fill-opacity="{petal_alpha}" /&gt;&lt;/g&gt;'</span>)</span>
<span id="cb12-57"><a href="#cb12-57"></a>  </span>
<span id="cb12-58"><a href="#cb12-58"></a>  <span class="co"># make petal text</span></span>
<span id="cb12-59"><a href="#cb12-59"></a>  petals_text <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'    &lt;text x="{coords$x}" y="{coords$y+petal_text_size/2}"&gt;{petal_text}&lt;/text&gt;'</span>, <span class="at">.literal =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-60"><a href="#cb12-60"></a>    <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb12-61"><a href="#cb12-61"></a>  </span>
<span id="cb12-62"><a href="#cb12-62"></a>  <span class="co"># general styles</span></span>
<span id="cb12-63"><a href="#cb12-63"></a>  svg_style <span class="ot">&lt;-</span> <span class="st">'&lt;style type="text/css"&gt;</span></span>
<span id="cb12-64"><a href="#cb12-64"></a><span class="st">  svg { </span></span>
<span id="cb12-65"><a href="#cb12-65"></a><span class="st">    font-family: sans-serif;</span></span>
<span id="cb12-66"><a href="#cb12-66"></a><span class="st">    font-size: {{petal_text_size}}px; </span></span>
<span id="cb12-67"><a href="#cb12-67"></a><span class="st">    text-anchor: middle; </span></span>
<span id="cb12-68"><a href="#cb12-68"></a><span class="st">    fill: {{petal_text_color}};</span></span>
<span id="cb12-69"><a href="#cb12-69"></a><span class="st">  }</span></span>
<span id="cb12-70"><a href="#cb12-70"></a><span class="st">&lt;/style&gt;'</span></span>
<span id="cb12-71"><a href="#cb12-71"></a>  </span>
<span id="cb12-72"><a href="#cb12-72"></a>  svg <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"&lt;svg viewBox = '0 0 {{2*cx}} {{2*cy}}'&gt;"</span>, </span>
<span id="cb12-73"><a href="#cb12-73"></a>               svg_style,</span>
<span id="cb12-74"><a href="#cb12-74"></a>               center, center_texts,</span>
<span id="cb12-75"><a href="#cb12-75"></a>               petal_fix1, petals, petal_fix2, petals_text,</span>
<span id="cb12-76"><a href="#cb12-76"></a>               <span class="st">"&lt;/svg&gt;"</span>,</span>
<span id="cb12-77"><a href="#cb12-77"></a>               <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-78"><a href="#cb12-78"></a>    <span class="fu">glue</span>(<span class="at">.open =</span> <span class="st">"{{"</span>, <span class="at">.close =</span> <span class="st">"}}"</span>)</span>
<span id="cb12-79"><a href="#cb12-79"></a>  </span>
<span id="cb12-80"><a href="#cb12-80"></a>  svg</span>
<span id="cb12-81"><a href="#cb12-81"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Test the defaults.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb13"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>svg <span class="ot">&lt;-</span> <span class="fu">flower</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<svg viewbox="0 0 1650 1650"><style type="text/css">
  svg { 
    font-family: sans-serif;
    font-size: 125px; 
    text-anchor: middle; 
    fill: white;
  }
</style>
<polygon points="825,575 1041.51,700 1041.51,950 825,1075 608.49,950 608.49,700" fill="#808080"></polygon><text x="825" y="808.333333333333" fill="white" font-size="83.3333333333333px">All of the</text><text x="825" y="900" fill="white" font-size="83.3333333333333px">Things</text><g transform="rotate(90, 825, 325)"><path d="M 575 325
A 250 250 0 0 1 1075 325
L 575 325
Z" fill="#FF0000" fill-opacity="1"></path></g><circle cx="825" cy="325" r="250" fill="#FF0000" fill-opacity="1"></circle><circle cx="1258.01" cy="575" r="250" fill="#FFFF00" fill-opacity="1"></circle><circle cx="1258.01" cy="1075" r="250" fill="#00FF00" fill-opacity="1"></circle><circle cx="825" cy="1325" r="250" fill="#00FFFF" fill-opacity="1"></circle><circle cx="391.99" cy="1075" r="250" fill="#0000FF" fill-opacity="1"></circle><circle cx="391.99" cy="575" r="250" fill="#FF00FF" fill-opacity="1"></circle><g transform="rotate(-90, 825, 325)"><path d="M 575 325
A 250 250 0 0 1 1075 325
L 575 325
Z" fill="#FF0000" fill-opacity="1"></path></g><text x="825" y="387.5">A</text><text x="1258.01" y="637.5">B</text><text x="1258.01" y="1137.5">C</text><text x="825" y="1387.5">D</text><text x="391.99" y="1137.5">E</text><text x="391.99" y="637.5">F</text></svg></section><section id="original-pride-flag" class="level2" data-number="4.7"><h2 data-number="4.7" class="anchored" data-anchor-id="original-pride-flag">
<span class="header-section-number">4.7</span> Original Pride Flag</h2>
<p>Test the customisability by making a chart with the meaning of the 8 colours of the original pride flag.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb14"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>svg <span class="ot">&lt;-</span> <span class="fu">flower</span>(<span class="at">n =</span> <span class="dv">8</span>, <span class="at">petal_dist =</span> <span class="dv">400</span>, <span class="at">r =</span> <span class="dv">200</span>,</span>
<span id="cb14-2"><a href="#cb14-2"></a>              <span class="at">petal_colors =</span> <span class="fu">c</span>(<span class="st">"#FF66B1"</span>, <span class="st">"#FF0000"</span>, <span class="st">"#FF8F1A"</span>, <span class="st">"#FEFF3A"</span>,</span>
<span id="cb14-3"><a href="#cb14-3"></a>                               <span class="st">"#008F1D"</span>, <span class="st">"#00C0C0"</span>, <span class="st">"#420095"</span>, <span class="st">"#8F008B"</span>),</span>
<span id="cb14-4"><a href="#cb14-4"></a>              <span class="at">petal_alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb14-5"><a href="#cb14-5"></a>              <span class="at">petal_text =</span> <span class="fu">c</span>(<span class="st">"Sex"</span>, <span class="st">"Life"</span>, <span class="st">"Healing"</span>, <span class="st">"Sunlight"</span>,</span>
<span id="cb14-6"><a href="#cb14-6"></a>                             <span class="st">"Nature"</span>, <span class="st">"Magic/Art"</span>, <span class="st">"Serenity"</span>, <span class="st">"Spirit"</span>),</span>
<span id="cb14-7"><a href="#cb14-7"></a>              <span class="at">center_text =</span> <span class="fu">c</span>(<span class="st">"Original"</span>, <span class="st">"Pride"</span>, <span class="st">"Flag"</span>),</span>
<span id="cb14-8"><a href="#cb14-8"></a>              <span class="at">center_text_size =</span> <span class="dv">80</span>,</span>
<span id="cb14-9"><a href="#cb14-9"></a>              <span class="at">center_text_offsets =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">60</span>, <span class="dv">40</span>, <span class="dv">140</span>),</span>
<span id="cb14-10"><a href="#cb14-10"></a>              <span class="at">petal_text_color =</span> <span class="st">"#222222"</span>,</span>
<span id="cb14-11"><a href="#cb14-11"></a>              <span class="at">petal_text_size =</span> <span class="dv">70</span>,</span>
<span id="cb14-12"><a href="#cb14-12"></a>              <span class="at">center_color =</span> <span class="st">"black"</span>,</span>
<span id="cb14-13"><a href="#cb14-13"></a>              <span class="at">center_text_color =</span> <span class="st">"white"</span></span>
<span id="cb14-14"><a href="#cb14-14"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<svg viewbox="0 0 1320 1320"><style type="text/css">
  svg { 
    font-family: sans-serif;
    font-size: 70px; 
    text-anchor: middle; 
    fill: #222222;
  }
</style>
<polygon points="660,460 801.42,518.58 860,660 801.42,801.42 660,860 518.58,801.42 460,660 518.58,518.58" fill="black"></polygon><text x="660" y="600" fill="white" font-size="80px">Original</text><text x="660" y="700" fill="white" font-size="80px">Pride</text><text x="660" y="800" fill="white" font-size="80px">Flag</text><g transform="rotate(90, 660, 260)"><path d="M 460 260
A 200 200 0 0 1 860 260
L 460 260
Z" fill="#FF66B1" fill-opacity="0.8"></path></g><circle cx="660" cy="260" r="200" fill="#FF66B1" fill-opacity="0.8"></circle><circle cx="942.84" cy="377.16" r="200" fill="#FF0000" fill-opacity="0.8"></circle><circle cx="1060" cy="660" r="200" fill="#FF8F1A" fill-opacity="0.8"></circle><circle cx="942.84" cy="942.84" r="200" fill="#FEFF3A" fill-opacity="0.8"></circle><circle cx="660" cy="1060" r="200" fill="#008F1D" fill-opacity="0.8"></circle><circle cx="377.16" cy="942.84" r="200" fill="#00C0C0" fill-opacity="0.8"></circle><circle cx="260" cy="660" r="200" fill="#420095" fill-opacity="0.8"></circle><circle cx="377.16" cy="377.16" r="200" fill="#8F008B" fill-opacity="0.8"></circle><g transform="rotate(-90, 660, 260)"><path d="M 460 260
A 200 200 0 0 1 860 260
L 460 260
Z" fill="#FF66B1" fill-opacity="0.8"></path></g><text x="660" y="295">Sex</text><text x="942.84" y="412.16">Life</text><text x="1060" y="695">Healing</text><text x="942.84" y="977.84">Sunlight</text><text x="660" y="1095">Nature</text><text x="377.16" y="977.84">Magic/Art</text><text x="260" y="695">Serenity</text><text x="377.16" y="412.16">Spirit</text></svg></section><section id="save-as-svg-or-png" class="level2" data-number="4.8"><h2 data-number="4.8" class="anchored" data-anchor-id="save-as-svg-or-png">
<span class="header-section-number">4.8</span> Save as SVG or PNG</h2>
<p>You can display your SVG directly in a website by setting <code>results='asis'</code> in the code chunk header. It will display it full size unless you use another method to constrain the image size. I set a css style of <code>svg { width: 100%; }</code>.</p>
<details><summary>Code</summary><div class="sourceCode" id="cb15"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">cat</span>(svg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><svg viewbox="0 0 1320 1320"><style type="text/css">
  svg { 
    font-family: sans-serif;
    font-size: 70px; 
    text-anchor: middle; 
    fill: #222222;
  }
</style>
<polygon points="660,460 801.42,518.58 860,660 801.42,801.42 660,860 518.58,801.42 460,660 518.58,518.58" fill="black"></polygon><text x="660" y="600" fill="white" font-size="80px">Original</text><text x="660" y="700" fill="white" font-size="80px">Pride</text><text x="660" y="800" fill="white" font-size="80px">Flag</text><g transform="rotate(90, 660, 260)"><path d="M 460 260
A 200 200 0 0 1 860 260
L 460 260
Z" fill="#FF66B1" fill-opacity="0.8"></path></g><circle cx="660" cy="260" r="200" fill="#FF66B1" fill-opacity="0.8"></circle><circle cx="942.84" cy="377.16" r="200" fill="#FF0000" fill-opacity="0.8"></circle><circle cx="1060" cy="660" r="200" fill="#FF8F1A" fill-opacity="0.8"></circle><circle cx="942.84" cy="942.84" r="200" fill="#FEFF3A" fill-opacity="0.8"></circle><circle cx="660" cy="1060" r="200" fill="#008F1D" fill-opacity="0.8"></circle><circle cx="377.16" cy="942.84" r="200" fill="#00C0C0" fill-opacity="0.8"></circle><circle cx="260" cy="660" r="200" fill="#420095" fill-opacity="0.8"></circle><circle cx="377.16" cy="377.16" r="200" fill="#8F008B" fill-opacity="0.8"></circle><g transform="rotate(-90, 660, 260)"><path d="M 460 260
A 200 200 0 0 1 860 260
L 460 260
Z" fill="#FF66B1" fill-opacity="0.8"></path></g><text x="660" y="295">Sex</text><text x="942.84" y="412.16">Life</text><text x="1060" y="695">Healing</text><text x="942.84" y="977.84">Sunlight</text><text x="660" y="1095">Nature</text><text x="377.16" y="977.84">Magic/Art</text><text x="260" y="695">Serenity</text><text x="377.16" y="412.16">Spirit</text></svg><p>You can write it to an svg file, or use svgr to convert to an image.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb16"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">write</span>(svg, <span class="st">"images/day4.svg"</span>)</span>
<span id="cb16-2"><a href="#cb16-2"></a>rsvg<span class="sc">::</span><span class="fu">rsvg_png</span>(<span class="at">svg =</span> <span class="fu">charToRaw</span>(svg), </span>
<span id="cb16-3"><a href="#cb16-3"></a>               <span class="at">file =</span> <span class="st">"images/day4.png"</span>, </span>
<span id="cb16-4"><a href="#cb16-4"></a>               <span class="at">width =</span> <span class="dv">8</span><span class="sc">*</span><span class="dv">150</span>, <span class="at">height =</span> <span class="dv">8</span><span class="sc">*</span><span class="dv">150</span>)</span>
<span id="cb16-5"><a href="#cb16-5"></a></span>
<span id="cb16-6"><a href="#cb16-6"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"images/day4.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/day4.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>


</section></main><!-- /main --><script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    setTimeout(function() {
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./03-historical.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Historical</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./05-slope.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Slope</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">CC-BY 2022, Lisa DeBruine</div>   
      <div class="nav-footer-center"><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/debruine/30DCC-2022">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/lisadebruine">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer>
include/script.js


</body></html>