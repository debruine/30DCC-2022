<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.80">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Code and charts for the 2022 30-Day Chart Challenge">
<title>30DCC (2022) - 23&nbsp; Tiles</title>
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
<script src="site_libs/quarto-nav/quarto-nav.js"></script><script src="site_libs/quarto-nav/headroom.min.js"></script><script src="site_libs/clipboard/clipboard.min.js"></script><meta name="quarto:offset" content="./">
<script src="site_libs/quarto-search/autocomplete.umd.js"></script><script src="site_libs/quarto-search/fuse.min.js"></script><script src="site_libs/quarto-search/quarto-search.js"></script><link href="./24-financial-times.html" rel="next">
<link href="./22-animation.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script><script src="site_libs/quarto-html/popper.min.js"></script><script src="site_libs/quarto-html/tippy.umd.min.js"></script><script src="site_libs/quarto-html/anchor.min.js"></script><link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<script src="site_libs/bootstrap/bootstrap.min.js"></script><link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
    "location": "sidebar",
    "copy-button": false,
    "collapse-after": 2,
    "panel-placement": "start",
    "type": "textbox",
    "limit": 20,
    "language": {
      "search-no-results-text": "No results",
      "search-matching-documents-text": "matching documents",
      "search-copy-link-title": "Copy link to search",
      "search-hide-matches-text": "Hide additional matches",
      "search-more-match-text": "more match in this document",
      "search-more-matches-text": "more matches in this document",
      "search-clear-button-title": "Clear",
      "search-detached-cancel-button-title": "Cancel",
      "search-submit-button-title": "Submit"
    }
  }</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-6NP3MF25W3', { 'anonymize_ip': true});
  </script><script type="application/json" class="js-hypothesis-config">
  {
    "theme": "clean",
    "openSidebar": false
  }
  </script><script async="" src="https://hypothes.is/embed.js"></script><!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]--><link rel="stylesheet" href="include/style.css">
</head>
<body class="floating">
<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">
<span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Tiles</span>
</h1>
      <button type="button" class="quarto-btn-toggle btn">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">30DCC (2022)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/debruine/30DCC-2022/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Overview</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-comparisons" aria-expanded="true">Comparisons</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-comparisons" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-comparisons" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-part-to-whole.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Part-to-whole</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-pictogram.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Pictogram</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-historical.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Historical</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-flora.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Flora</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-slope.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Slope</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-owid.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">OWiD</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-distributions" aria-expanded="true">Distributions</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-distributions" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-distributions" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-physical.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Physical</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-mountains.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Mountains</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-statistics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Statistics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-experimental.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Experimental</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-circular.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Circular</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-economist.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">The Economist</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-relationships" aria-expanded="true">Relationships</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-relationships" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-relationships" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-correlation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Correlation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-3-dimensional.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">3-Dimensional</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-multivariate.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Multivariate</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-environment.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Environment</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-connections.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Connections</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-oecd.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">OECD</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-timeseries" aria-expanded="true">Timeseries</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-timeseries" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-timeseries" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-global-change.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Global Change</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-new-tool.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">New Tool</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-down-upwards.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Down/Upwards</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-animation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Animation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-tiles.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Tiles</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-financial-times.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Financial Times</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-uncertainties" aria-expanded="true">Uncertainties</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-uncertainties" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-uncertainties" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-trend.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Trend</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-interactive.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Interactive</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./27-future.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Future</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./28-deviations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Deviations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./29-storytelling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Storytelling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30-un-population.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">UN Population</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-appendices" aria-expanded="true">Appendices</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-appendices" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-appendices" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-a-colours.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Colours</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-b-stained-glass.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Stained Glass Heart</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-c-magic-eye.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Magic Eye</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-d-psyarxiv.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">PsyArXiv</span></a>
  </div>
</li>
    </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc"><h2 id="toc-title">Table of contents</h2>
<ul>
<li>
<a href="#data" class="nav-link active" data-scroll-target="#data"> <span class="header-section-number">23.1</span> Data</a>
<ul class="collapse">
<li><a href="#get-repo-names" class="nav-link" data-scroll-target="#get-repo-names"> <span class="header-section-number">23.1.1</span> Get repo names</a></li>
<li><a href="#forks" class="nav-link" data-scroll-target="#forks"> <span class="header-section-number">23.1.2</span> Forks</a></li>
<li><a href="#get-commits" class="nav-link" data-scroll-target="#get-commits"> <span class="header-section-number">23.1.3</span> Get commits</a></li>
<li><a href="#iterate" class="nav-link" data-scroll-target="#iterate"> <span class="header-section-number">23.1.4</span> Iterate</a></li>
</ul>
</li>
<li>
<a href="#plot" class="nav-link" data-scroll-target="#plot"> <span class="header-section-number">23.2</span> Plot</a>
<ul class="collapse">
<li><a href="#inital-plot" class="nav-link" data-scroll-target="#inital-plot"> <span class="header-section-number">23.2.1</span> Inital Plot</a></li>
<li><a href="#github-theme" class="nav-link" data-scroll-target="#github-theme"> <span class="header-section-number">23.2.2</span> GitHub Theme</a></li>
<li><a href="#add-months" class="nav-link" data-scroll-target="#add-months"> <span class="header-section-number">23.2.3</span> Add months</a></li>
<li><a href="#psyteachr-theme" class="nav-link" data-scroll-target="#psyteachr-theme"> <span class="header-section-number">23.2.4</span> PsyTeachR Theme</a></li>
<li><a href="#change-the-facet-strip-color" class="nav-link" data-scroll-target="#change-the-facet-strip-color"> <span class="header-section-number">23.2.5</span> Change the facet strip color</a></li>
</ul>
</li>
</ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/debruine/30DCC-2022/edit/main/23-tiles.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/debruine/30DCC-2022/issues/new" class="toc-action">Report an issue</a></p><p><a href="https://github.com/debruine/30DCC-2022/blob/main/23-tiles.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header"><h1 class="title d-none d-lg-block display-7">
<span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Tiles</span>
</h1>
</header><p>I really love the github activity tile graphs. For today’s plot, I’m going to use the methods from <a href="21-down-upwards.html">Day&nbsp;<span>21</span></a> the get data to make a similar plot, but showing all of the commits to repositories from the <a href="https://psyteachr.github.io">psyTeachR team</a>.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"images/github_activity.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/github_activity.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<details><summary>Setup</summary><div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># for data wrangling</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">library</span>(jsonlite)  <span class="co"># for reading JSON from GitHub API</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="fu">library</span>(glue)      <span class="co"># for text manipulation</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="fu">library</span>(lubridate) <span class="co"># for dates</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="fu">library</span>(scales)    <span class="co"># for axis scales</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="fu">library</span>(ggplotify) <span class="co"># for custom plot changes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="data" class="level2" data-number="23.1"><h2 data-number="23.1" class="anchored" data-anchor-id="data">
<span class="header-section-number">23.1</span> Data</h2>
<p>I need to use the <a href="https://docs.github.com/en/rest/guides/getting-started-with-the-rest-api">GitHub API</a> to get all the commit dates for the psyTeachR team.</p>
<section id="get-repo-names" class="level3" data-number="23.1.1"><h3 data-number="23.1.1" class="anchored" data-anchor-id="get-repo-names">
<span class="header-section-number">23.1.1</span> Get repo names</h3>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb3"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>psyteachr_repos <span class="ot">&lt;-</span> <span class="fu">read_json</span>(<span class="st">"https://api.github.com/orgs/psyTeachR/repos"</span>,</span>
<span id="cb3-2"><a href="#cb3-2"></a>                             <span class="at">simplifyVector =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a>psyteachr_repos<span class="sc">$</span>name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-stdout">
<pre><code> [1] "webex"               "trdair_workshop"     "shiny-tutorials"    
 [4] "mms"                 "fossos"              "psyteachr.github.io"
 [7] "R.House.2019"        "ug3-stats"           "msc-data-skills"    
[10] "ug2-practical"       "book-template"       "hack-your-data"     
[13] "glossary"            "misc"                "sips2019"           
[16] "books"               "ug1-practical"       "FAQ"                
[19] "assessr-book"        "msc-conv"            "handyworkbook"      
[22] "markr"               "introdataviz"        "stat-models-v1"     
[25] "reprores-v2"         "psyteachr"           "analysis-v2"        
[28] "tutorials-old"       "ads-v1"              "template"           </code></pre>
</div>
</div>
</section><section id="forks" class="level3" data-number="23.1.2"><h3 data-number="23.1.2" class="anchored" data-anchor-id="forks">
<span class="header-section-number">23.1.2</span> Forks</h3>
<p>Most of the team work mainly in a fork on their own account and commit to the psyteachr origin rarely, so to get a clear picture of the work that the team does, we’ll also need to find all the forks.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb5"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># get API URLs for repos with at least one fork</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>forks_urls <span class="ot">&lt;-</span> psyteachr_repos<span class="sc">$</span>forks_url[psyteachr_repos<span class="sc">$</span>forks <span class="sc">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co"># get forks data</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>forks <span class="ot">&lt;-</span> <span class="fu">map_df</span>(forks_urls, read_json, <span class="at">simplifyVector =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="fu">saveRDS</span>(forks, <span class="st">"data/forks.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We could get the members of the psyTeachR organisation through the GitHub API, but most haven’t made their membership public, so I’m just hard-coding their account names. We’ll use the <code>psyteachr_forks</code> list later.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb6"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>forks <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"data/forks.rds"</span>)</span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a>members <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"BertlettJE"</span>, <span class="st">"carolinakt"</span>, <span class="st">"clelandwoods"</span>, </span>
<span id="cb6-4"><a href="#cb6-4"></a>             <span class="st">"dalejbarr"</span>, <span class="st">"debruine"</span>, <span class="st">"eavanmac"</span>, </span>
<span id="cb6-5"><a href="#cb6-5"></a>             <span class="st">"emilynordmann"</span>, <span class="st">"HelenaPaterson"</span>, <span class="st">"JackEdTaylor"</span>,</span>
<span id="cb6-6"><a href="#cb6-6"></a>             <span class="st">"philmcaleer"</span>, <span class="st">"shannon-mcnee"</span>)</span>
<span id="cb6-7"><a href="#cb6-7"></a></span>
<span id="cb6-8"><a href="#cb6-8"></a>psyteachr_forks <span class="ot">&lt;-</span> forks <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>  <span class="fu">select</span>(full_name) <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>  <span class="fu">separate</span>(full_name, <span class="fu">c</span>(<span class="st">"user"</span>, <span class="st">"repo"</span>), <span class="at">sep =</span> <span class="st">"/"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>  <span class="fu">filter</span>(user <span class="sc">%in%</span> members)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="get-commits" class="level3" data-number="23.1.3"><h3 data-number="23.1.3" class="anchored" data-anchor-id="get-commits">
<span class="header-section-number">23.1.3</span> Get commits</h3>
<p>Get the commits for one repo first to see how they’re structured. I’ll choose the first ever psyTeachR group repo, called “R.House.2019”, which we made on a trip to Islay for a long weekend to learn git (and drink whisky) and actually did stay in an airBnB that was an <a href="https://www.ruralhouse.co.uk/">R.House</a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/psyteachr_islay.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">The PsyTeachR team on the beach at Islay during our 2019 retreat to learn about GitHub.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb7"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># get commits for one repo</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>rhouse_commits <span class="ot">&lt;-</span> <span class="fu">read_json</span>(<span class="st">"https://api.github.com/repos/psyTeachR/R.House.2019/commits"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>There’s a lot of data here, so let’s just extract the author, message and date for each commit.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb8"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># get data for one commit</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>commit <span class="ot">&lt;-</span> rhouse_commits[[<span class="dv">1</span>]]</span>
<span id="cb8-3"><a href="#cb8-3"></a>commit_info <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="at">author =</span> commit<span class="sc">$</span>commit<span class="sc">$</span>author<span class="sc">$</span>name,</span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="at">message =</span> commit<span class="sc">$</span>commit<span class="sc">$</span>message,</span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="at">date =</span> commit<span class="sc">$</span>commit<span class="sc">$</span>committer<span class="sc">$</span>date</span>
<span id="cb8-7"><a href="#cb8-7"></a>)</span>
<span id="cb8-8"><a href="#cb8-8"></a></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="fu">str</span>(commit_info)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-stdout">
<pre><code>List of 3
 $ author : chr "debruine"
 $ message: chr "renamed files"
 $ date   : chr "2019-01-19T11:31:03Z"</code></pre>
</div>
</div>
</section><section id="iterate" class="level3" data-number="23.1.4"><h3 data-number="23.1.4" class="anchored" data-anchor-id="iterate">
<span class="header-section-number">23.1.4</span> Iterate</h3>
<p>Now we just need to do this for every commit in every repository.</p>
<p>First, iterate over repos. You’re limited to 60 requests per hour without authenticating, which I don’t have time to figure out right now, so make sure you save this so you don’t lose it and set the code chunk to <code>eval = FALSE</code> or comment it out so you don’t accidentally run it again.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb10"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># create API URLs for repos and forks</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>ptr_urls <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"https://api.github.com/repos/psyTeachR/{psyteachr_repos$name}/commits"</span>)</span>
<span id="cb10-3"><a href="#cb10-3"></a>fork_urls <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"https://api.github.com/repos/{psyteachr_forks$user}/{psyteachr_forks$repo}/commits"</span>)</span>
<span id="cb10-4"><a href="#cb10-4"></a>urls <span class="ot">&lt;-</span> <span class="fu">c</span>(ptr_urls, fork_urls)</span>
<span id="cb10-5"><a href="#cb10-5"></a></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co"># get commit info for each repo</span></span>
<span id="cb10-7"><a href="#cb10-7"></a>psyteachr_commits <span class="ot">&lt;-</span> <span class="fu">map</span>(urls, read_json)</span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co"># save to RDS object </span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="fu">saveRDS</span>(psyteachr_commits, <span class="st">"data/psyteachr_commits.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Iterate over all the repos and commits. Add columns with the date formatted as a date, year, week, and weekday.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>psyteachr_commits <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"data/psyteachr_commits.rds"</span>)</span>
<span id="cb11-2"><a href="#cb11-2"></a></span>
<span id="cb11-3"><a href="#cb11-3"></a>commit_info <span class="ot">&lt;-</span> <span class="fu">map_df</span>(psyteachr_commits, </span>
<span id="cb11-4"><a href="#cb11-4"></a>                   <span class="cf">function</span>(commits) {</span>
<span id="cb11-5"><a href="#cb11-5"></a>    <span class="co"># iterate over commits for this repo</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>    <span class="fu">map_df</span>(commits, <span class="cf">function</span>(commit) {</span>
<span id="cb11-7"><a href="#cb11-7"></a>      <span class="fu">list</span>(</span>
<span id="cb11-8"><a href="#cb11-8"></a>        <span class="at">author =</span> commit<span class="sc">$</span>commit<span class="sc">$</span>author<span class="sc">$</span>name,</span>
<span id="cb11-9"><a href="#cb11-9"></a>        <span class="at">message =</span> commit<span class="sc">$</span>commit<span class="sc">$</span>message,</span>
<span id="cb11-10"><a href="#cb11-10"></a>        <span class="at">date =</span> commit<span class="sc">$</span>commit<span class="sc">$</span>committer<span class="sc">$</span>date,</span>
<span id="cb11-11"><a href="#cb11-11"></a>        <span class="at">url =</span> <span class="fu">gsub</span>(<span class="st">"(https</span><span class="sc">\\</span><span class="st">://api</span><span class="sc">\\</span><span class="st">.github</span><span class="sc">\\</span><span class="st">.com/repos/|/commits/.*)"</span>, <span class="st">""</span>, commit<span class="sc">$</span>url)</span>
<span id="cb11-12"><a href="#cb11-12"></a>      )</span>
<span id="cb11-13"><a href="#cb11-13"></a>    })<span class="sc">%&gt;%</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>        <span class="fu">separate</span>(url, <span class="fu">c</span>(<span class="st">"user"</span>, <span class="st">"repo"</span>), <span class="at">sep =</span> <span class="st">"/"</span>)</span>
<span id="cb11-15"><a href="#cb11-15"></a>  }) <span class="sc">%&gt;%</span></span>
<span id="cb11-16"><a href="#cb11-16"></a>  <span class="co"># process versions of the date column</span></span>
<span id="cb11-17"><a href="#cb11-17"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> lubridate<span class="sc">::</span><span class="fu">as_date</span>(date),</span>
<span id="cb11-18"><a href="#cb11-18"></a>         <span class="at">year =</span> <span class="fu">year</span>(date),</span>
<span id="cb11-19"><a href="#cb11-19"></a>         <span class="at">week =</span> <span class="fu">week</span>(date),</span>
<span id="cb11-20"><a href="#cb11-20"></a>         <span class="at">wday =</span> <span class="fu">wday</span>(date))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="plot" class="level2" data-number="23.2"><h2 data-number="23.2" class="anchored" data-anchor-id="plot">
<span class="header-section-number">23.2</span> Plot</h2>
<section id="inital-plot" class="level3" data-number="23.2.1"><h3 data-number="23.2.1" class="anchored" data-anchor-id="inital-plot">
<span class="header-section-number">23.2.1</span> Inital Plot</h3>
<p>The first plot is usually pretty horrific, but this isn’t too bad.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb12"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>commits_by_day <span class="ot">&lt;-</span> commit_info <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">count</span>(date, wday, week, year)</span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a>commits_by_day <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> week, <span class="at">y =</span> wday, <span class="at">alpha =</span> n)) <span class="sc">+</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>  <span class="fu">geom_tile</span>(<span class="at">fill =</span> <span class="st">"green"</span>) <span class="sc">+</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>  <span class="fu">theme_dark</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="23-tiles_files/figure-html/tiles-plot1-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="github-theme" class="level3" data-number="23.2.2"><h3 data-number="23.2.2" class="anchored" data-anchor-id="github-theme">
<span class="header-section-number">23.2.2</span> GitHub Theme</h3>
<p>We can make this closer to the GitHub theme by fixing the coordinates so the tiles are square, making the panel backgrounds black, and getting rid of the grid lines. We can also free up a little more vertical space by putting the facet labels on the left. Add a black border to the tiles with <code>size = 1</code>.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb13"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>commits_by_day <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> week, <span class="at">y =</span> wday, <span class="at">alpha =</span> n)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">geom_tile</span>(<span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="st">"black"</span>, </span>
<span id="cb13-4"><a href="#cb13-4"></a>            <span class="at">size =</span> <span class="dv">1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">strip.position =</span> <span class="st">"left"</span>) <span class="sc">+</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>  <span class="fu">theme_dark</span>() <span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>  <span class="fu">theme</span>(</span>
<span id="cb13-9"><a href="#cb13-9"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb13-10"><a href="#cb13-10"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb13-11"><a href="#cb13-11"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="23-tiles_files/figure-html/tiles-github-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="add-months" class="level3" data-number="23.2.3"><h3 data-number="23.2.3" class="anchored" data-anchor-id="add-months">
<span class="header-section-number">23.2.3</span> Add months</h3>
<p>The weeks of the year line up nicely, but don’t exactly correspond to months, so I’m going to hack this a little. I’ll add a secondary axis that rescales the weeks of the year to a 0.5 to 12.5 scale. The extra 0.5 is so the breaks can be set to 1:12 and the names of the month can go approximately in the middle of the month. I set position to “top” so the month axis would be on the bottom and I can hide the top axis (and some other parts we don’t need) using <code>theme()</code>.</p>
<p>I also refactored year in the data so that 2022 displays at the top.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb14"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>commits_by_day<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">factor</span>(commits_by_day<span class="sc">$</span>year, <span class="at">levels =</span> <span class="dv">2022</span><span class="sc">:</span><span class="dv">2018</span>)</span>
<span id="cb14-2"><a href="#cb14-2"></a></span>
<span id="cb14-3"><a href="#cb14-3"></a>commits_by_day <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> week, <span class="at">y =</span> wday, <span class="at">alpha =</span> n)) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>  <span class="fu">geom_tile</span>(<span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="st">"black"</span>, </span>
<span id="cb14-6"><a href="#cb14-6"></a>            <span class="at">size =</span> <span class="dv">1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb14-8"><a href="#cb14-8"></a>    <span class="at">position =</span> <span class="st">"top"</span>,</span>
<span id="cb14-9"><a href="#cb14-9"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(</span>
<span id="cb14-10"><a href="#cb14-10"></a>      <span class="at">trans =</span> <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">rescale</span>(., <span class="at">to =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">12.5</span>)),</span>
<span id="cb14-11"><a href="#cb14-11"></a>      <span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>,</span>
<span id="cb14-12"><a href="#cb14-12"></a>      <span class="at">labels =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, T)</span>
<span id="cb14-13"><a href="#cb14-13"></a>    )</span>
<span id="cb14-14"><a href="#cb14-14"></a>  ) <span class="sc">+</span></span>
<span id="cb14-15"><a href="#cb14-15"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">strip.position =</span> <span class="st">"left"</span>) <span class="sc">+</span></span>
<span id="cb14-16"><a href="#cb14-16"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb14-17"><a href="#cb14-17"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb14-18"><a href="#cb14-18"></a>  <span class="fu">theme_dark</span>() <span class="sc">+</span></span>
<span id="cb14-19"><a href="#cb14-19"></a>  <span class="fu">theme</span>(</span>
<span id="cb14-20"><a href="#cb14-20"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb14-21"><a href="#cb14-21"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-22"><a href="#cb14-22"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-23"><a href="#cb14-23"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-24"><a href="#cb14-24"></a>    <span class="at">axis.text.x.top =</span> <span class="fu">element_blank</span>()</span>
<span id="cb14-25"><a href="#cb14-25"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="23-tiles_files/figure-html/tiles-months-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="psyteachr-theme" class="level3" data-number="23.2.4"><h3 data-number="23.2.4" class="anchored" data-anchor-id="psyteachr-theme">
<span class="header-section-number">23.2.4</span> PsyTeachR Theme</h3>
<p>The psyTeachR books and website have a distinctive rainbow theme.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://psyteachr.github.io/images/twitter/psyteachr.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb15"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># psyTeachR colours</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>ptrc <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="st">"#983E82"</span>,</span>
<span id="cb15-4"><a href="#cb15-4"></a>  <span class="st">"#E2A458"</span>,</span>
<span id="cb15-5"><a href="#cb15-5"></a>  <span class="st">"#F5DC70"</span>,</span>
<span id="cb15-6"><a href="#cb15-6"></a>  <span class="st">"#59935B"</span>,</span>
<span id="cb15-7"><a href="#cb15-7"></a>  <span class="st">"#467AAC"</span>,</span>
<span id="cb15-8"><a href="#cb15-8"></a>  <span class="st">"#61589C"</span></span>
<span id="cb15-9"><a href="#cb15-9"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Set the fill to year and remove the green fill from <code>geom_tile()</code>. Use <code>scale_fill_manual()</code> to set the colours to the first 5 psyTeachR colours. Use <code>scale_alpha()</code> to set the minimum and maximum alpha values.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb16"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>commits_by_day <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> week, <span class="at">y =</span> wday, <span class="at">alpha =</span> n, <span class="at">fill =</span> year)) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb16-5"><a href="#cb16-5"></a>    <span class="at">position =</span> <span class="st">"top"</span>,</span>
<span id="cb16-6"><a href="#cb16-6"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(</span>
<span id="cb16-7"><a href="#cb16-7"></a>      <span class="at">trans =</span> <span class="sc">~</span>scales<span class="sc">::</span><span class="fu">rescale</span>(., <span class="at">to =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">12.5</span>)),</span>
<span id="cb16-8"><a href="#cb16-8"></a>      <span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>,</span>
<span id="cb16-9"><a href="#cb16-9"></a>      <span class="at">labels =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, T)</span>
<span id="cb16-10"><a href="#cb16-10"></a>    )</span>
<span id="cb16-11"><a href="#cb16-11"></a>  ) <span class="sc">+</span></span>
<span id="cb16-12"><a href="#cb16-12"></a>  <span class="fu">scale_alpha</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb16-13"><a href="#cb16-13"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> ptrc[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]) <span class="sc">+</span></span>
<span id="cb16-14"><a href="#cb16-14"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">strip.position =</span> <span class="st">"left"</span>) <span class="sc">+</span></span>
<span id="cb16-15"><a href="#cb16-15"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb16-16"><a href="#cb16-16"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb16-17"><a href="#cb16-17"></a>  <span class="fu">theme_dark</span>() <span class="sc">+</span></span>
<span id="cb16-18"><a href="#cb16-18"></a>  <span class="fu">theme</span>(</span>
<span id="cb16-19"><a href="#cb16-19"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb16-20"><a href="#cb16-20"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb16-21"><a href="#cb16-21"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-22"><a href="#cb16-22"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-23"><a href="#cb16-23"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-24"><a href="#cb16-24"></a>    <span class="at">axis.text.x.top =</span> <span class="fu">element_blank</span>()</span>
<span id="cb16-25"><a href="#cb16-25"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="23-tiles_files/figure-html/tiles-psyteachr-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="change-the-facet-strip-color" class="level3" data-number="23.2.5"><h3 data-number="23.2.5" class="anchored" data-anchor-id="change-the-facet-strip-color">
<span class="header-section-number">23.2.5</span> Change the facet strip color</h3>
<p>I wanted to make the facet strip colour match the year’s tile colour, but it’s trickier than it sounds. I found this <a href="https://stackoverflow.com/questions/53455092/r-ggplot2-change-colour-of-font-and-background-in-facet-strip">StackOverflow answer by utubun</a>.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb17"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>p <span class="ot">&lt;-</span> <span class="fu">last_plot</span>()</span>
<span id="cb17-2"><a href="#cb17-2"></a>g <span class="ot">&lt;-</span> <span class="fu">ggplot_gtable</span>(<span class="fu">ggplot_build</span>(p))</span>
<span id="cb17-3"><a href="#cb17-3"></a>strips <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">grepl</span>(<span class="st">'strip-'</span>, g<span class="sc">$</span>layout<span class="sc">$</span>name))</span>
<span id="cb17-4"><a href="#cb17-4"></a></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(strips)) {</span>
<span id="cb17-6"><a href="#cb17-6"></a>  k <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">grepl</span>(<span class="st">'rect'</span>, g<span class="sc">$</span>grobs[[strips[i]]]<span class="sc">$</span>grobs[[<span class="dv">1</span>]]<span class="sc">$</span>childrenOrder))</span>
<span id="cb17-7"><a href="#cb17-7"></a>  l <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">grepl</span>(<span class="st">'titleGrob'</span>, g<span class="sc">$</span>grobs[[strips[i]]]<span class="sc">$</span>grobs[[<span class="dv">1</span>]]<span class="sc">$</span>childrenOrder))</span>
<span id="cb17-8"><a href="#cb17-8"></a>  g<span class="sc">$</span>grobs[[strips[i]]]<span class="sc">$</span>grobs[[<span class="dv">1</span>]]<span class="sc">$</span>children[[k]]<span class="sc">$</span>gp<span class="sc">$</span>fill <span class="ot">&lt;-</span> ptrc[i]</span>
<span id="cb17-9"><a href="#cb17-9"></a>  g<span class="sc">$</span>grobs[[strips[i]]]<span class="sc">$</span>grobs[[<span class="dv">1</span>]]<span class="sc">$</span>children[[l]]<span class="sc">$</span>children[[<span class="dv">1</span>]]<span class="sc">$</span>gp<span class="sc">$</span>col <span class="ot">&lt;-</span> <span class="st">"black"</span></span>
<span id="cb17-10"><a href="#cb17-10"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now you can view the plot with <code>plot(g)</code> or convert it back to a ggplot object.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb18"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># plot(g)</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>ggplotify<span class="sc">::</span><span class="fu">as.ggplot</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="23-tiles_files/figure-html/tiles-facet-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>


</section></section></main><!-- /main --><script>
// open rdrr links externally ----

var exlinks = document.querySelectorAll("a[href^='https://rdrr.io']");
var exlink_func = function(){
  window.open(this.href);
  return false;
};
for (var i = 0; i < exlinks.length; i++) {
    exlinks[i].addEventListener('click', exlink_func, false);
}

// visible second sidebar in mobile ----

function move_sidebar() {
  var toc = document.getElementById("TOC");
  var small_sidebar = document.querySelector("#quarto-sidebar .sidebar-menu-container");
  var right_sidebar = document.getElementById("quarto-margin-sidebar");

  if (window.innerWidth < 768) {
    small_sidebar.append(toc);
  } else {
    right_sidebar.append(toc);
  }
}
move_sidebar();
window.onresize = move_sidebar;
</script><script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    setTimeout(function() {
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./22-animation.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Animation</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./24-financial-times.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Financial Times</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">CC-BY 2022, Lisa DeBruine</div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/debruine/30DCC-2022">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/lisadebruine">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer>


</body></html>