<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.80">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Code and charts for the 2022 30-Day Chart Challenge">
<title>30DCC (2022) - 24&nbsp; Financial Times</title>
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
<script src="site_libs/quarto-nav/quarto-nav.js"></script><script src="site_libs/quarto-nav/headroom.min.js"></script><script src="site_libs/clipboard/clipboard.min.js"></script><meta name="quarto:offset" content="./">
<script src="site_libs/quarto-search/autocomplete.umd.js"></script><script src="site_libs/quarto-search/fuse.min.js"></script><script src="site_libs/quarto-search/quarto-search.js"></script><link href="./25-trend.html" rel="next">
<link href="./23-tiles.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script><script src="site_libs/quarto-html/popper.min.js"></script><script src="site_libs/quarto-html/tippy.umd.min.js"></script><script src="site_libs/quarto-html/anchor.min.js"></script><link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<script src="site_libs/bootstrap/bootstrap.min.js"></script><link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
    "location": "sidebar",
    "copy-button": false,
    "collapse-after": 2,
    "panel-placement": "start",
    "type": "textbox",
    "limit": 20,
    "language": {
      "search-no-results-text": "No results",
      "search-matching-documents-text": "matching documents",
      "search-copy-link-title": "Copy link to search",
      "search-hide-matches-text": "Hide additional matches",
      "search-more-match-text": "more match in this document",
      "search-more-matches-text": "more matches in this document",
      "search-clear-button-title": "Clear",
      "search-detached-cancel-button-title": "Cancel",
      "search-submit-button-title": "Submit"
    }
  }</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-6NP3MF25W3', { 'anonymize_ip': true});
  </script><script type="application/json" class="js-hypothesis-config">
  {
    "theme": "clean",
    "openSidebar": false
  }
  </script><script async="" src="https://hypothes.is/embed.js"></script><script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.20/datatables.js"></script><script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><link href="site_libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]--><link rel="stylesheet" href="include/style.css">
</head>
<body class="floating">
<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">
<span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Financial Times</span>
</h1>
      <button type="button" class="quarto-btn-toggle btn">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">30DCC (2022)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/debruine/30DCC-2022/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Overview</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-comparisons" aria-expanded="true">Comparisons</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-comparisons" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-comparisons" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-part-to-whole.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Part-to-whole</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-pictogram.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Pictogram</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-historical.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Historical</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-flora.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Flora</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-slope.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Slope</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-owid.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">OWiD</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-distributions" aria-expanded="true">Distributions</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-distributions" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-distributions" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-physical.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Physical</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-mountains.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Mountains</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-statistics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Statistics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-experimental.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Experimental</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-circular.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Circular</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-economist.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">The Economist</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-relationships" aria-expanded="true">Relationships</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-relationships" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-relationships" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-correlation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Correlation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-3-dimensional.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">3-Dimensional</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-multivariate.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Multivariate</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-environment.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Environment</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-connections.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Connections</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-oecd.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">OECD</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-timeseries" aria-expanded="true">Timeseries</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-timeseries" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-timeseries" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-global-change.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Global Change</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-new-tool.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">New Tool</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-down-upwards.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Down/Upwards</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-animation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Animation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-tiles.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Tiles</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-financial-times.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Financial Times</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-uncertainties" aria-expanded="true">Uncertainties</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-uncertainties" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-uncertainties" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-trend.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Trend</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-interactive.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Interactive</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./27-future.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Future</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./28-deviations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Deviations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./29-storytelling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Storytelling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30-un-population.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">UN Population</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-appendices" aria-expanded="true">Appendices</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-appendices" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-appendices" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-a-colours.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Colours</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-b-stained-glass.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Stained Glass Heart</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-c-magic-eye.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Magic Eye</span></a>
  </div>
</li>
    </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc"><h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#examples" class="nav-link active" data-scroll-target="#examples"> <span class="header-section-number">24.1</span> Examples</a></li>
<li>
<a href="#data" class="nav-link" data-scroll-target="#data"> <span class="header-section-number">24.2</span> Data</a>
<ul class="collapse">
<li><a href="#pick-a-coverage-category" class="nav-link" data-scroll-target="#pick-a-coverage-category"> <span class="header-section-number">24.2.1</span> Pick a coverage category</a></li>
<li><a href="#south-sudan" class="nav-link" data-scroll-target="#south-sudan"> <span class="header-section-number">24.2.2</span> South Sudan</a></li>
<li><a href="#choose-focus-countries" class="nav-link" data-scroll-target="#choose-focus-countries"> <span class="header-section-number">24.2.3</span> Choose focus countries</a></li>
</ul>
</li>
<li>
<a href="#plot" class="nav-link" data-scroll-target="#plot"> <span class="header-section-number">24.3</span> Plot</a>
<ul class="collapse">
<li><a href="#theme" class="nav-link" data-scroll-target="#theme"> <span class="header-section-number">24.3.1</span> Theme</a></li>
<li><a href="#overlap-and-stripes" class="nav-link" data-scroll-target="#overlap-and-stripes"> <span class="header-section-number">24.3.2</span> Overlap and stripes</a></li>
<li><a href="#risen-plot" class="nav-link" data-scroll-target="#risen-plot"> <span class="header-section-number">24.3.3</span> Risen plot</a></li>
<li><a href="#fallen-plot" class="nav-link" data-scroll-target="#fallen-plot"> <span class="header-section-number">24.3.4</span> Fallen plot</a></li>
<li><a href="#combine-plots" class="nav-link" data-scroll-target="#combine-plots"> <span class="header-section-number">24.3.5</span> Combine Plots</a></li>
</ul>
</li>
</ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/debruine/30DCC-2022/edit/main/24-financial-times.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/debruine/30DCC-2022/issues/new" class="toc-action">Report an issue</a></p><p><a href="https://github.com/debruine/30DCC-2022/blob/main/24-financial-times.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header"><h1 class="title d-none d-lg-block display-7">
<span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Financial Times</span>
</h1>
</header><div class="cell" data-layout-align="center">
<details><summary>Setup</summary><div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># for data wrangling</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(readxl)    <span class="co"># for reading data from WHO</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(patchwork) <span class="co"># for combining plots</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(ggtext)    <span class="co"># for styled text in plots</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(showtext)  <span class="co"># for fonts</span></span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">font_add_google</span>(<span class="st">"Roboto"</span>, <span class="at">regular.wt =</span> <span class="dv">300</span>, <span class="at">bold.wt =</span> <span class="dv">500</span>)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">font_add_google</span>(<span class="st">"Roboto"</span>, <span class="at">family =</span> <span class="st">"RobotoB"</span>, <span class="at">regular.wt =</span> <span class="dv">400</span>, <span class="at">bold.wt =</span> <span class="dv">700</span>)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">showtext_auto</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="examples" class="level2" data-number="24.1"><h2 data-number="24.1" class="anchored" data-anchor-id="examples">
<span class="header-section-number">24.1</span> Examples</h2>
<p>I browsed the <a href="https://www.ft.com/data-visualisation">Financial Times Data Visualisation</a> webpage to find a plot I want to re-create. I don’t have a subscription, so I could only see the thumbnails, but it looks like this is a section for snarky commentary on plots.</p>
<p>I did find that you can hack the image URLs to increase the width and see bigger versions.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># download.file("https://www.ft.com/__origami/service/image/v2/images/raw/https%3A%2F%2Fd1e00ek4ebabms.cloudfront.net%2Fproduction%2Fdfac7f09-aaca-4e94-b4eb-b96180e69a8a.png?source=next&amp;fit=scale-down&amp;dpr=2&amp;width=1200", "images/ft_whirlwind.png")</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"images/ft_whirlwind.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/ft_whirlwind.png" class="img-fluid figure-img" alt="A plot that looks like a tornado, with an unclear x-axis and Average number of deaths per day on the y-axis, with different coloured spirals for each of 8 countries. The inference to be made from this graph is not clear, whcih is the point." style="width:100.0%"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">I don’t think I’ll be trying to re-create this plot</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The <a href="https://www.ft.com/visual-and-data-journalism">Visual and data journalism</a> section looks more fruitful, if I had a subscription. Then I searched twitter (congrats on getting a 2-letter handle, @FT!) and found a link to an article on <a href="https://www.ft.com/content/62fbf660-2651-11ea-9a4f-963f0ec7e134">Ten charts that tell the story of 2019</a> that I could access. It’s interesting to read some pre-pandemic news; the first two charts are on Brexit and anti-vax movements.</p>
<p>I always like these lollipop charts and haven’t had much practice making them, so I’m going to recreate this plot.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/ft-vax.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="data" class="level2" data-number="24.2"><h2 data-number="24.2" class="anchored" data-anchor-id="data">
<span class="header-section-number">24.2</span> Data</h2>
<p>First, I needed to find the data. The original chart said the data came from WHO and Unicef; I downloaded the <a href="https://immunizationdata.who.int/pages/coverage/mcv.html">WHO Data on MCV1</a>.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb3"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>measles <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/Measles vaccination coverage.xlsx"</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a>mcv1 <span class="ot">&lt;-</span> measles <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="fu">select</span>(CODE, NAME, YEAR, COVERAGE_CATEGORY, COVERAGE) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="fu">filter</span>(YEAR <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2008</span>, <span class="dv">2018</span>))</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="fu">head</span>(mcv1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="kable-table">
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;"> CODE </th>
   <th style="text-align:left;"> NAME </th>
   <th style="text-align:right;"> YEAR </th>
   <th style="text-align:left;"> COVERAGE_CATEGORY </th>
   <th style="text-align:right;"> COVERAGE </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:left;"> AFG </td>
   <td style="text-align:left;"> Afghanistan </td>
   <td style="text-align:right;"> 2018 </td>
   <td style="text-align:left;"> ADMIN </td>
   <td style="text-align:right;"> 82.45 </td>
  </tr>
<tr>
<td style="text-align:left;"> AFG </td>
   <td style="text-align:left;"> Afghanistan </td>
   <td style="text-align:right;"> 2008 </td>
   <td style="text-align:left;"> ADMIN </td>
   <td style="text-align:right;"> 75.00 </td>
  </tr>
<tr>
<td style="text-align:left;"> AFG </td>
   <td style="text-align:left;"> Afghanistan </td>
   <td style="text-align:right;"> 2018 </td>
   <td style="text-align:left;"> OFFICIAL </td>
   <td style="text-align:right;"> 82.00 </td>
  </tr>
<tr>
<td style="text-align:left;"> AFG </td>
   <td style="text-align:left;"> Afghanistan </td>
   <td style="text-align:right;"> 2008 </td>
   <td style="text-align:left;"> OFFICIAL </td>
   <td style="text-align:right;"> 59.00 </td>
  </tr>
<tr>
<td style="text-align:left;"> AFG </td>
   <td style="text-align:left;"> Afghanistan </td>
   <td style="text-align:right;"> 2018 </td>
   <td style="text-align:left;"> WUENIC </td>
   <td style="text-align:right;"> 71.00 </td>
  </tr>
<tr>
<td style="text-align:left;"> AFG </td>
   <td style="text-align:left;"> Afghanistan </td>
   <td style="text-align:right;"> 2008 </td>
   <td style="text-align:left;"> WUENIC </td>
   <td style="text-align:right;"> 59.00 </td>
  </tr>
</tbody>
</table>
</div>
</div>
</div>
<section id="pick-a-coverage-category" class="level3" data-number="24.2.1"><h3 data-number="24.2.1" class="anchored" data-anchor-id="pick-a-coverage-category">
<span class="header-section-number">24.2.1</span> Pick a coverage category</h3>
<p>I’m not sure what the different coverage categories are, but a quick plot shows that the WUENIC values are at least all under 100%.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb4"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">ggplot</span>(mcv1, <span class="fu">aes</span>(<span class="at">x =</span> YEAR, <span class="at">y =</span> COVERAGE, <span class="at">group =</span> NAME)) <span class="sc">+</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>COVERAGE_CATEGORY)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="24-financial-times_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="south-sudan" class="level3" data-number="24.2.2"><h3 data-number="24.2.2" class="anchored" data-anchor-id="south-sudan">
<span class="header-section-number">24.2.2</span> South Sudan</h3>
<p>I need to use the 2011 value for South Sudan instead of 2008, since South Sudan didn’t exist until 2011.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb5"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>ssd_2011 <span class="ot">&lt;-</span> measles <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">filter</span>(CODE <span class="sc">==</span> <span class="st">"SSD"</span>, </span>
<span id="cb5-3"><a href="#cb5-3"></a>         COVERAGE_CATEGORY <span class="sc">==</span> <span class="st">"WUENIC"</span>, </span>
<span id="cb5-4"><a href="#cb5-4"></a>         YEAR <span class="sc">==</span> <span class="dv">2011</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="fu">pull</span>(COVERAGE)</span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a>mcv1 <span class="ot">&lt;-</span> mcv1 <span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>  <span class="fu">add_row</span>(<span class="at">CODE =</span> <span class="st">"SSD"</span>,</span>
<span id="cb5-9"><a href="#cb5-9"></a>          <span class="at">NAME =</span> <span class="st">"South Sudan"</span>,</span>
<span id="cb5-10"><a href="#cb5-10"></a>          <span class="at">COVERAGE_CATEGORY =</span> <span class="st">"WUENIC"</span>, </span>
<span id="cb5-11"><a href="#cb5-11"></a>          <span class="at">YEAR =</span> <span class="dv">2008</span>,</span>
<span id="cb5-12"><a href="#cb5-12"></a>          <span class="at">COVERAGE =</span> ssd_2011)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="choose-focus-countries" class="level3" data-number="24.2.3"><h3 data-number="24.2.3" class="anchored" data-anchor-id="choose-focus-countries">
<span class="header-section-number">24.2.3</span> Choose focus countries</h3>
<p>I tried to get the list of countries shown on the original chart programatically, but they’re not just the biggest increases and decreases, so I had to extract them manually. I wrote a quick function to search for the code for any name or part of a name.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb6"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>ccode <span class="ot">&lt;-</span> <span class="cf">function</span>(txt) { </span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">filter</span>(mcv1, <span class="fu">grepl</span>(txt, NAME)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3"></a>    <span class="fu">select</span>(NAME, CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="#cb6-4"></a>    <span class="fu">distinct</span>() </span>
<span id="cb6-5"><a href="#cb6-5"></a>}</span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="fu">ccode</span>(<span class="st">"Congo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="kable-table">
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;"> NAME </th>
   <th style="text-align:left;"> CODE </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:left;"> Congo </td>
   <td style="text-align:left;"> COG </td>
  </tr>
<tr>
<td style="text-align:left;"> Democratic Republic of the Congo </td>
   <td style="text-align:left;"> COD </td>
  </tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Some of the countries on the chart use different names or abbreviations, so I made a named vector with the country codes and names for the chart.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb7"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="at">Global =</span> <span class="st">"Global"</span>, </span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="at">KAZ =</span> <span class="st">"Kazakhstan"</span>, </span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="at">GBR =</span> <span class="st">"UK"</span>, </span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="at">USA =</span> <span class="st">"USA"</span>, </span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="at">SDN =</span> <span class="st">"Sudan"</span>, </span>
<span id="cb7-7"><a href="#cb7-7"></a>  <span class="at">UGA =</span> <span class="st">"Uganda"</span>, </span>
<span id="cb7-8"><a href="#cb7-8"></a>  <span class="at">COD =</span> <span class="st">"Dem Rep of Congo"</span>, </span>
<span id="cb7-9"><a href="#cb7-9"></a>  <span class="at">HTI =</span> <span class="st">"Haiti"</span>, </span>
<span id="cb7-10"><a href="#cb7-10"></a>  <span class="at">NGA =</span> <span class="st">"Nigeria"</span>, </span>
<span id="cb7-11"><a href="#cb7-11"></a>  <span class="at">ETH =</span> <span class="st">"Ethiopia"</span>, </span>
<span id="cb7-12"><a href="#cb7-12"></a>  <span class="at">AGO =</span> <span class="st">"Angola"</span>, </span>
<span id="cb7-13"><a href="#cb7-13"></a>  <span class="at">SOM =</span> <span class="st">"Solmalia"</span>, </span>
<span id="cb7-14"><a href="#cb7-14"></a>  <span class="at">TCD =</span> <span class="st">"Chad"</span>, </span>
<span id="cb7-15"><a href="#cb7-15"></a>  <span class="at">THA =</span> <span class="st">"Thailand"</span>, </span>
<span id="cb7-16"><a href="#cb7-16"></a>  <span class="at">UKR =</span> <span class="st">"Ukraine"</span>, </span>
<span id="cb7-17"><a href="#cb7-17"></a>  <span class="at">IDN =</span> <span class="st">"Indonesia"</span>, </span>
<span id="cb7-18"><a href="#cb7-18"></a>  <span class="at">VEN =</span> <span class="st">"Venezuela"</span>, </span>
<span id="cb7-19"><a href="#cb7-19"></a>  <span class="at">CMR =</span> <span class="st">"Cameroon"</span>, </span>
<span id="cb7-20"><a href="#cb7-20"></a>  <span class="at">PHL =</span> <span class="st">"Philippines"</span>, </span>
<span id="cb7-21"><a href="#cb7-21"></a>  <span class="at">YEM =</span> <span class="st">"Yemen"</span>, </span>
<span id="cb7-22"><a href="#cb7-22"></a>  <span class="at">SYR =</span> <span class="st">"Syria"</span>, </span>
<span id="cb7-23"><a href="#cb7-23"></a>  <span class="at">MDG =</span> <span class="st">"Madagascar"</span>, </span>
<span id="cb7-24"><a href="#cb7-24"></a>  <span class="at">SSD =</span> <span class="st">"South Sudan"</span>, </span>
<span id="cb7-25"><a href="#cb7-25"></a>  <span class="at">CAF =</span> <span class="st">"Ctl African Rep"</span>, </span>
<span id="cb7-26"><a href="#cb7-26"></a>  <span class="at">GIN =</span> <span class="st">"Guinea"</span></span>
<span id="cb7-27"><a href="#cb7-27"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>I used that vector to filter the mcv1 table, make a new column called <code>country</code> and make it a factor so the countries will display in the right order. I also filtered the table to just the “WUENIC” coverage and made the table wide so there was a column for each year.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb8"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>mcv1_status <span class="ot">&lt;-</span> mcv1  <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="fu">filter</span>(CODE <span class="sc">%in%</span> <span class="fu">names</span>(countries)) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">recode</span>(CODE, <span class="sc">!!!</span>countries),</span>
<span id="cb8-4"><a href="#cb8-4"></a>         <span class="at">country =</span> <span class="fu">factor</span>(country, countries)</span>
<span id="cb8-5"><a href="#cb8-5"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="fu">arrange</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="fu">filter</span>(COVERAGE_CATEGORY <span class="sc">==</span> <span class="st">"WUENIC"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="fu">select</span>(<span class="sc">-</span>COVERAGE_CATEGORY, <span class="sc">-</span>NAME) <span class="sc">%&gt;%</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> YEAR,</span>
<span id="cb8-10"><a href="#cb8-10"></a>              <span class="at">names_prefix =</span> <span class="st">"Y"</span>,</span>
<span id="cb8-11"><a href="#cb8-11"></a>              <span class="at">values_from =</span> COVERAGE) <span class="sc">%&gt;%</span></span>
<span id="cb8-12"><a href="#cb8-12"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="fu">mutate</span>(<span class="at">change =</span> <span class="fu">ifelse</span>((Y2018 <span class="sc">-</span> Y2008) <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="st">"decrease"</span>, <span class="st">"increase"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="htmlwidget-3f0592bca423f355ff4b" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3f0592bca423f355ff4b">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25"],["Global","KAZ","GBR","USA","SDN","UGA","COD","HTI","NGA","ETH","AGO","SOM","TCD","THA","UKR","IDN","VEN","CMR","PHL","YEM","SYR","MDG","SSD","CAF","GIN"],["Global","Kazakhstan","UK","USA","Sudan","Uganda","Dem Rep of Congo","Haiti","Nigeria","Ethiopia","Angola","Solmalia","Chad","Thailand","Ukraine","Indonesia","Venezuela","Cameroon","Philippines","Yemen","Syria","Madagascar","South Sudan","Ctl African Rep","Guinea"],[86,99,92,92,88,86,57,69,54,55,50,46,42,96,91,89,74,59,75,64,63,57,49,41,47],[81,99,86,92,79,70,64,62,53,54,48,34,27,98,94,76,93,80,92,69,81,70,62,58,55],["increase","increase","increase","increase","increase","increase","decrease","increase","increase","increase","increase","increase","increase","decrease","decrease","increase","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease","decrease"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CODE<\/th>\n      <th>country<\/th>\n      <th>Y2018<\/th>\n      <th>Y2008<\/th>\n      <th>change<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section></section><section id="plot" class="level2" data-number="24.3"><h2 data-number="24.3" class="anchored" data-anchor-id="plot">
<span class="header-section-number">24.3</span> Plot</h2>
<p>Time for the first plot! The data aren’t exactly the same as on the original chart. While the original chart showed an increase in vaccination in the Democratic Republic of the Congo, the data I’m using show a decrease. Similarly, Indonesia has a change in the opposite direction as the original chart. I’ll plot the data I have, but in the order of the original plot, so I’ll need to make two separate plots and combine them with <code class="package">patchwork</code>.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb9"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">ggplot</span>(mcv1_status, <span class="fu">aes</span>(<span class="at">y =</span> country)) <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> Y2008, <span class="at">xend =</span> Y2018, <span class="at">yend =</span> country), </span>
<span id="cb9-3"><a href="#cb9-3"></a>               <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Y2008), <span class="at">color =</span> <span class="st">"dodgerblue"</span>) <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Y2018), <span class="at">color =</span> <span class="st">"hotpink"</span>) <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>change, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free_y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="24-financial-times_files/figure-html/ft-plot1-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<section id="theme" class="level3" data-number="24.3.1"><h3 data-number="24.3.1" class="anchored" data-anchor-id="theme">
<span class="header-section-number">24.3.1</span> Theme</h3>
<p>First, I need to set up a few things for the plot theme. I extracted the colour for the dots for 2008 and 2018, plus the background and stripe colours, and the grey text colour, and set those to variables I can use later.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb10"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>dot_08 <span class="ot">&lt;-</span> <span class="st">"#24559A"</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>dot_18 <span class="ot">&lt;-</span> <span class="st">"#DD6A8D"</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>bg_light <span class="ot">&lt;-</span> <span class="st">"#FFFFFF"</span> <span class="co"># "#FFF1E5" # FT website bg colour</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>bg_tan <span class="ot">&lt;-</span> <span class="st">"#F6D0AE"</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>text_color <span class="ot">&lt;-</span> <span class="st">"#65615E"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="overlap-and-stripes" class="level3" data-number="24.3.2"><h3 data-number="24.3.2" class="anchored" data-anchor-id="overlap-and-stripes">
<span class="header-section-number">24.3.2</span> Overlap and stripes</h3>
<p>In the original chart, Kazakhstan doesn’t have much change at all, so the dots are nudged up and down vertically so they don’t completely overlap. The USA also doesn’t have discernible change and isn’t nudged in the original plot, but I’ll nudge it here. I’ll make a new variable called <code>y</code>, which is the numeric value for the <code>country</code> factor, but reversed, and <code>y08</code> and <code>y18</code> which are the y-axis values for each year. They’re all the same as <code>y</code>, except for Kazakhstan and the USA.</p>
<p>I’ll also add a new column called <code>stripe</code> to set the alpha for the stripe for each country, following the pattern from the original chart, with Global being a dark stripe, and alternating semi-transparent and no stripe after that.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>figdat <span class="ot">&lt;-</span> mcv1_status <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-3"><a href="#cb11-3"></a>    <span class="at">y =</span> <span class="fu">rev</span>(<span class="fu">as.numeric</span>(country)),</span>
<span id="cb11-4"><a href="#cb11-4"></a>    <span class="at">y08 =</span> y <span class="sc">+</span> <span class="fu">ifelse</span>(CODE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"USA"</span>, <span class="st">"KAZ"</span>), .<span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb11-5"><a href="#cb11-5"></a>    <span class="at">y18 =</span> y <span class="sc">-</span> <span class="fu">ifelse</span>(CODE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"USA"</span>, <span class="st">"KAZ"</span>), .<span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb11-6"><a href="#cb11-6"></a>    <span class="at">stripe =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, </span>
<span id="cb11-7"><a href="#cb11-7"></a>               <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.6</span>), <span class="at">length.out =</span> <span class="dv">12</span>), </span>
<span id="cb11-8"><a href="#cb11-8"></a>               <span class="fu">rep</span>(<span class="fu">c</span>(<span class="fl">0.6</span>, <span class="dv">0</span>), <span class="at">length.out =</span> <span class="dv">12</span>)</span>
<span id="cb11-9"><a href="#cb11-9"></a>               )</span>
<span id="cb11-10"><a href="#cb11-10"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="risen-plot" class="level3" data-number="24.3.3"><h3 data-number="24.3.3" class="anchored" data-anchor-id="risen-plot">
<span class="header-section-number">24.3.3</span> Risen plot</h3>
<p>This plot took a lot of trial and error with the annotations. The trick is to set <code>coord_cartesian(clip = "off")</code> so you can plot outside the axis limits, and add some plot margin with the <code>theme()</code>.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb12"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># define top panel</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>risen <span class="ot">&lt;-</span> <span class="fu">slice</span>(figdat, <span class="dv">1</span><span class="sc">:</span><span class="dv">13</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> y, <span class="at">alpha =</span> <span class="fu">I</span>(stripe)),</span>
<span id="cb12-5"><a href="#cb12-5"></a>             <span class="at">color =</span> bg_tan, <span class="at">size =</span> <span class="dv">9</span>) <span class="sc">+</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">95</span>, <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">size =</span> <span class="fl">0.35</span>) <span class="sc">+</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> Y2008, <span class="at">xend =</span> Y2018, <span class="at">yend =</span> y), </span>
<span id="cb12-8"><a href="#cb12-8"></a>               <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Y2008, <span class="at">y =</span> y08), </span>
<span id="cb12-10"><a href="#cb12-10"></a>             <span class="at">color =</span> dot_08, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Y2018, <span class="at">y =</span> y18), </span>
<span id="cb12-12"><a href="#cb12-12"></a>             <span class="at">color =</span> dot_18, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb12-13"><a href="#cb12-13"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb12-14"><a href="#cb12-14"></a>           <span class="at">label =</span> <span class="st">"The measles 'first dose' immunisation</span><span class="sc">\n</span><span class="st">offers an individual 90% protections from</span><span class="sc">\n</span><span class="st">the disease. Twenty-three countries have</span><span class="sc">\n</span><span class="st">yet to introduce the second dose, which</span><span class="sc">\n</span><span class="st">would increase this cover to 99%."</span>, </span>
<span id="cb12-15"><a href="#cb12-15"></a>           <span class="at">x =</span> <span class="dv">3</span>, <span class="at">y =</span> <span class="fl">24.15</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">vjust =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-16"><a href="#cb12-16"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb12-17"><a href="#cb12-17"></a>           <span class="at">label =</span> <span class="st">"(95% threshold</span><span class="sc">\n</span><span class="st">needed to control</span><span class="sc">\n</span><span class="st">spread in a community)"</span>, </span>
<span id="cb12-18"><a href="#cb12-18"></a>           <span class="at">x =</span> <span class="dv">100</span>, <span class="at">y =</span> <span class="dv">26</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, </span>
<span id="cb12-19"><a href="#cb12-19"></a>           <span class="at">lineheight =</span> <span class="dv">1</span>, <span class="at">color =</span> text_color) <span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20"></a>  <span class="fu">annotate</span>(<span class="st">"richtext"</span>, <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb12-21"><a href="#cb12-21"></a>           <span class="at">label =</span> <span class="st">"&lt;span style='color: #24559A; font-size: 22px;'&gt;●&lt;/span&gt; 2008 &lt;span style='color: #DD6A8D; font-size: 22px;'&gt;●&lt;/span&gt; 2018"</span>,</span>
<span id="cb12-22"><a href="#cb12-22"></a>           <span class="at">x =</span> <span class="sc">-</span><span class="dv">23</span>, <span class="at">y =</span> <span class="fl">26.5</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">vjust =</span> <span class="dv">0</span>, </span>
<span id="cb12-23"><a href="#cb12-23"></a>           <span class="at">color =</span> text_color,</span>
<span id="cb12-24"><a href="#cb12-24"></a>           <span class="at">label.colour =</span> <span class="st">"transparent"</span>) <span class="sc">+</span></span>
<span id="cb12-25"><a href="#cb12-25"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> (<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)<span class="sc">*</span><span class="dv">10</span>, </span>
<span id="cb12-26"><a href="#cb12-26"></a>                     <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb12-27"><a href="#cb12-27"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>, </span>
<span id="cb12-28"><a href="#cb12-28"></a>                     <span class="at">labels =</span> <span class="fu">rev</span>(figdat<span class="sc">$</span>country),</span>
<span id="cb12-29"><a href="#cb12-29"></a>                     <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> .<span class="dv">6</span>)) <span class="sc">+</span></span>
<span id="cb12-30"><a href="#cb12-30"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">13</span>, <span class="dv">25</span>), <span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span></span>
<span id="cb12-31"><a href="#cb12-31"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb12-32"><a href="#cb12-32"></a>       <span class="at">title=</span><span class="st">"Countries where the MCV1 coverage has been maintained or risen"</span>)</span>
<span id="cb12-33"><a href="#cb12-33"></a></span>
<span id="cb12-34"><a href="#cb12-34"></a><span class="co"># define theme</span></span>
<span id="cb12-35"><a href="#cb12-35"></a>ft_theme <span class="ot">&lt;-</span> <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">"Roboto"</span>, <span class="at">base_size =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb12-36"><a href="#cb12-36"></a>  <span class="fu">theme</span>(</span>
<span id="cb12-37"><a href="#cb12-37"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> text_color),</span>
<span id="cb12-38"><a href="#cb12-38"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> bg_light, <span class="at">color =</span> <span class="st">"transparent"</span>),</span>
<span id="cb12-39"><a href="#cb12-39"></a>    <span class="at">axis.line.y.left =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"grey60"</span>, <span class="at">size =</span> <span class="fl">0.2</span>),</span>
<span id="cb12-40"><a href="#cb12-40"></a>    <span class="at">axis.line.y.right =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"grey60"</span>, <span class="at">size =</span> <span class="fl">0.2</span>),</span>
<span id="cb12-41"><a href="#cb12-41"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-42"><a href="#cb12-42"></a>    <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-43"><a href="#cb12-43"></a>    <span class="at">panel.grid.minor.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-44"><a href="#cb12-44"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_line</span>(<span class="at">size =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="st">"grey90"</span>),</span>
<span id="cb12-45"><a href="#cb12-45"></a>    <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb12-46"><a href="#cb12-46"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>, <span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb12-47"><a href="#cb12-47"></a>  )</span>
<span id="cb12-48"><a href="#cb12-48"></a></span>
<span id="cb12-49"><a href="#cb12-49"></a><span class="co"># display top panel with theme</span></span>
<span id="cb12-50"><a href="#cb12-50"></a>top_panel <span class="ot">&lt;-</span> risen <span class="sc">+</span> ft_theme <span class="sc">+</span> </span>
<span id="cb12-51"><a href="#cb12-51"></a>  <span class="fu">theme</span>(<span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(.<span class="dv">4</span>, .<span class="dv">3</span>, .<span class="dv">1</span>, .<span class="dv">1</span>), <span class="st">"inches"</span>))</span>
<span id="cb12-52"><a href="#cb12-52"></a></span>
<span id="cb12-53"><a href="#cb12-53"></a>top_panel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="24-financial-times_files/figure-html/risen2-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="fallen-plot" class="level3" data-number="24.3.4"><h3 data-number="24.3.4" class="anchored" data-anchor-id="fallen-plot">
<span class="header-section-number">24.3.4</span> Fallen plot</h3>
<p>The lower plot is a bit simpler, with fewer annotations.</p>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb13"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># define bottom panel</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>fallen <span class="ot">&lt;-</span> <span class="fu">slice</span>(figdat, <span class="dv">14</span><span class="sc">:</span><span class="dv">25</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> y, <span class="at">alpha =</span> <span class="fu">I</span>(stripe)),</span>
<span id="cb13-5"><a href="#cb13-5"></a>             <span class="at">color =</span> bg_tan, <span class="at">size =</span> <span class="dv">9</span>) <span class="sc">+</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">95</span>, <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">size =</span> <span class="fl">0.35</span>) <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> Y2008, <span class="at">xend =</span> Y2018, <span class="at">yend =</span> y), </span>
<span id="cb13-8"><a href="#cb13-8"></a>               <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Y2008, <span class="at">y =</span> y08), </span>
<span id="cb13-10"><a href="#cb13-10"></a>             <span class="at">color =</span> dot_08, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Y2018, <span class="at">y =</span> y18), </span>
<span id="cb13-12"><a href="#cb13-12"></a>             <span class="at">color =</span> dot_18, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb13-13"><a href="#cb13-13"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> (<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)<span class="sc">*</span><span class="dv">10</span>, </span>
<span id="cb13-14"><a href="#cb13-14"></a>                     <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>, </span>
<span id="cb13-16"><a href="#cb13-16"></a>                     <span class="at">labels =</span> <span class="fu">rev</span>(figdat<span class="sc">$</span>country),</span>
<span id="cb13-17"><a href="#cb13-17"></a>                     <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> .<span class="dv">6</span>)) <span class="sc">+</span></span>
<span id="cb13-18"><a href="#cb13-18"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">12</span>), <span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span></span>
<span id="cb13-19"><a href="#cb13-19"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-20"><a href="#cb13-20"></a>       <span class="at">title=</span><span class="st">"Countries where the MCV1 coverage has fallen"</span>)</span>
<span id="cb13-21"><a href="#cb13-21"></a></span>
<span id="cb13-22"><a href="#cb13-22"></a><span class="co"># display bottom panel with theme</span></span>
<span id="cb13-23"><a href="#cb13-23"></a>bottom_panel <span class="ot">&lt;-</span> fallen <span class="sc">+</span> ft_theme <span class="sc">+</span> </span>
<span id="cb13-24"><a href="#cb13-24"></a>  <span class="fu">theme</span>(<span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(.<span class="dv">1</span>, .<span class="dv">3</span>, .<span class="dv">1</span>, .<span class="dv">1</span>), <span class="st">"inches"</span>))</span>
<span id="cb13-25"><a href="#cb13-25"></a></span>
<span id="cb13-26"><a href="#cb13-26"></a>bottom_panel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="24-financial-times_files/figure-html/fallen-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="combine-plots" class="level3" data-number="24.3.5"><h3 data-number="24.3.5" class="anchored" data-anchor-id="combine-plots">
<span class="header-section-number">24.3.5</span> Combine Plots</h3>
<div class="cell" data-layout-align="center">
<details><summary>Code</summary><div class="sourceCode" id="cb14"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>top_panel <span class="sc">+</span> bottom_panel <span class="sc">+</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb14-3"><a href="#cb14-3"></a>    <span class="at">title =</span> <span class="st">"**Global health:** mixed fortunes countering the 'anti-vax' movement"</span>,</span>
<span id="cb14-4"><a href="#cb14-4"></a>    <span class="at">subtitle =</span> <span class="st">"Measles immunisation coverage (%) for the first dose (MCV1) among 1 year olds  </span><span class="sc">\n</span><span class="st">Estimates, as of Apr 23 2022"</span>, </span>
<span id="cb14-5"><a href="#cb14-5"></a>    <span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb14-6"><a href="#cb14-6"></a>      <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> bg_light, <span class="at">color =</span> <span class="st">"transparent"</span>),</span>
<span id="cb14-7"><a href="#cb14-7"></a>      <span class="at">plot.title =</span> <span class="fu">element_markdown</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">family =</span> <span class="st">"RobotoB"</span>, </span>
<span id="cb14-8"><a href="#cb14-8"></a>                                    <span class="at">face =</span> <span class="st">"plain"</span>, <span class="at">color =</span> <span class="st">"black"</span>),</span>
<span id="cb14-9"><a href="#cb14-9"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">family =</span> <span class="st">"Roboto"</span>, </span>
<span id="cb14-10"><a href="#cb14-10"></a>                                       <span class="at">lineheight =</span> <span class="fl">1.5</span>,</span>
<span id="cb14-11"><a href="#cb14-11"></a>                                       <span class="at">face =</span> <span class="st">"plain"</span>, <span class="at">color =</span> text_color)</span>
<span id="cb14-12"><a href="#cb14-12"></a>    )</span>
<span id="cb14-13"><a href="#cb14-13"></a>  ) <span class="sc">+</span></span>
<span id="cb14-14"><a href="#cb14-14"></a>  <span class="fu">plot_layout</span>(<span class="at">nrow =</span> <span class="dv">2</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="24-financial-times_files/figure-html/ft-combo-1.png" class="img-fluid figure-img" alt="12 Countries where the MCV1 coverage has been maintained or risen and 12 Countries where the MCV1 coverage has fallen, with their 2008 and 2018 measles vaccination coverage plotted. Global coverage has risen from 81% n 2008 to 86% in 2018." style="width:100.0%"></p>
</figure>
</div>
</div>
</div>


</section></section></main><!-- /main --><script>
// open rdrr links externally ----

var exlinks = document.querySelectorAll("a[href^='https://rdrr.io']");
var exlink_func = function(){
  window.open(this.href);
  return false;
};
for (var i = 0; i < exlinks.length; i++) {
    exlinks[i].addEventListener('click', exlink_func, false);
}

// visible second sidebar in mobile ----

function move_sidebar() {
  var toc = document.getElementById("TOC");
  var small_sidebar = document.querySelector("#quarto-sidebar .sidebar-menu-container");
  var right_sidebar = document.getElementById("quarto-margin-sidebar");

  if (window.innerWidth < 768) {
    small_sidebar.append(toc);
  } else {
    right_sidebar.append(toc);
  }
}
move_sidebar();
window.onresize = move_sidebar;
</script><script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    setTimeout(function() {
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./23-tiles.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Tiles</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./25-trend.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Trend</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">CC-BY 2022, Lisa DeBruine</div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/debruine/30DCC-2022">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/lisadebruine">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer>


</body></html>